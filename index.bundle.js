!function(){var e,t,n,o,c,s,a,r=(e=[],function(){var t=e.length;return e.push({}),{addEventListener:function(n,i){return e[t][n]||(e[t][n]=[]),e[t][n].push(i),!0},removeEventListener:function(n,i){if(!e[t][n])return!1;for(var o=0;o<e[t][n].length;o++)if(e[t][n][o]===i)return e[t][n].splice(o,1),!0;return!1},doevent:function(n,i){if(!e[t][n])return!1;for(var o=0;o<e[t][n].length;o++)e[t][n][o].apply(null,i);return!0}}}),l={loadimg:function(e,t){var n=new Image;n.src=e,n.onload=function(){t(!0)},n.onerror=function(){t(!1)}},element:function(e,t={}){var n=document.createElement(e);for(var i in t)n.setAttribute(i,t[i]);return n},query:function(e,t,n){return e["querySelector"+(n?"All":"")](t)},getFavicon:function(e,t){return t||function(e){for(var t=new URL(e).host,n=["google.com","goog.le","chrome.com","youtube.com","youtu.be","facebook.com","fb.com","twitter.com","t.co","reddit.com","instagram.com","pinterest.com","linkedin.com"],i=0;i<n.length;i++)if(t.indexOf(n[i])>-1)return!0;return!1}(e)?"https://api.iowen.cn/favicon/"+new URL(e).host+".png":new URL(e).origin+"/favicon.ico"},fangdou:function(e,t){var n=null;return function(){n&&clearTimeout(n);var i=this;n=setTimeout((function(){e.apply(i,arguments)}),t)}},jsonp:function(e,t,n){var i="a"+Math.random().toString(36).slice(2),o=this.element("script",{src:function(e,t,n){var i=new URL(e);return i.searchParams.set(t,n),i.href}(e,n||"callback",i)});document.body.appendChild(o),window[i]=function(e){t(e),document.body.removeChild(o),delete window[i]}},xhr:function(e,t,n){var i=new XMLHttpRequest;return i.onreadystatechange=function(){4==i.readyState&&200==i.status&&t(i.responseText)},i.onerror=function(){n&&n({status:i.status,statusText:i.statusText,readyState:i.readyState,responseText:i.responseText})},i.open("GET",e,!0),i.send(),{abort:function(){i.abort()}}},checkSession:function(e){return e.isSession&&"Hvm_session_token_eoi1j2j"===e.session_token},getRandomHashCache:function(){return Math.random().toString(36).slice(2)+Date.now().toString(36)},copyText:function(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{const t=document.createElement("input");t.value=e,t.style.display="none",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}u.show("复制成功")},getGoogleIcon:function(e,t){return'<span class="material-symbols-outlined'+(t&&t.type?" "+t.type:"")+'">&#x'+e+";</span>"},checkDetailsCorrect:function(e,t){for(var n=0;n<t.length;n++)if(0==e.hasOwnProperty(t[n]))return!1;return!0}},u=(t=l.element("div",{class:"toast"}),n=null,o=null,l.query(document,"body").append(t),{show:function(e,i){t.innerHTML=e,t.classList.add("show"),t.style.animation="toastin .3s",clearTimeout(n),clearTimeout(o),n=setTimeout((function(){t.style.animation="toastout .3s",o=setTimeout((function(){t.classList.remove("show")}),298)}),i||2e3)}}),d=(c={tl:l.query(document,".topper .left"),tr:l.query(document,".topper .right"),bl:l.query(document,".bottomer .left"),br:l.query(document,".bottomer .right")},(s=function(e){this.content=e.content,this.width=e.width;var t=l.element("div",{class:"item"+(e.class?" "+e.class:"")+(e.important?" important":"")});c[e.offset].append(t),t.innerHTML=this.content,this.element=t,this.width&&(t.style.width=this.width+"px")}).prototype={getIcon:function(){return this.element},setIcon:function(e){this.content=e,this.element.innerHTML=this.content},setWidth:function(e){this.width=e,this.width&&(ic.style.width=this.width+"px")},getWidth:function(){return this.width},show:function(){this.element.style.display="block"},hide:function(){this.element.style.display="none"}},{icon:s}),{storage:g,getStorageList:f,getAllStorage:h}=function(){localStorage.quik2||(localStorage.quik2="{}");var e=localforage._getSupportedDrivers([localforage.INDEXEDDB])[0]==localforage.INDEXEDDB,t=function(e,t){localforage.getItem(e).then(t)},n=function(e,t){var n="^"+l.getRandomHashCache();localforage.setItem(n,e).then((function(){t(n)}))},i=function(e,t){localforage.removeItem(e).then(t)},o={},c=function(c,s){if("string"==typeof c){function a(n,i,o){if(!i)return r()[c][n];if(!e)throw new Error("indexedDB is not support in this browser");t(r()[c][n],(function(e){o(e)}))}function r(){return JSON.parse(localStorage.getItem("quik2"))}function l(e){var t=r();t[c]=e,localStorage.setItem("quik2",JSON.stringify(t))}return JSON.parse(localStorage.getItem("quik2"))[c]||l({}),o[c]=s,{get:a,set:function(t,o,s,u){if(s){if(!e)throw new Error("indexedDB is not support in this browser");a(t)&&i(a(t)),n(o,(function(e){var n=r();n[c][t]=e,l(n[c]),u(e)}))}else{var d=r();d[c][t]=o,l(d[c])}},remove:function(t,n,o){var s=r();if(n){if(!e)throw new Error("indexedDB is not support in this browser");i(s[c][t],(function(){var e=r();delete e[c][t],l(e),o()}))}else delete s[c][t],l(s[c])},list:function(){return Object.keys(r()[c])}}}throw new Error("ck is not a string")};return c.checkIDB=function(){return e},{storage:c,getStorageList:function(){return o},getAllStorage:function(){return JSON.parse(localStorage.getItem("quik2"))}}}(),v=function(){var e=[],t=function(t){this.options=t;var n=l.element("div",{class:"dialog"});n.innerHTML=`<div class="d-b"></div><div class="d-c">${t.content}</div>`,l.query(document,"main").append(n);var i=l.query(n,".d-c");t.class&&i.classList.add(t.class),1==t.mobileShowtype&&n.classList.add("mobile-show-full"),this.element=n,this.id=l.getRandomHashCache(),n.setAttribute("data-id",this.id),n.querySelector(".d-b").addEventListener("click",(function(){var t,n;window.innerWidth<=650&&(t=this.parentElement.getAttribute("data-id"),n=null,e.forEach((function(e){e.id==t&&(n=e)})),n).close()})),e.push(this)};return t.SHOW_TYPE_FULLSCREEN=1,t.SHOW_TYPE_DIALOG=2,t.iframeDialogBuilder=function(e,n=1){var i=new t({content:`<div class="material-symbols-outlined closebtn">&#xE5CD;</div><iframe src="${e}" class="dialog-iframe"></iframe>`,class:"iframe-dialog",mobileShowtype:n}),o=i.getDialogDom();return l.query(o,".closebtn").onclick=function(){i.close()},this.closed=!0,i},t.prototype={open:function(){this.element.classList.add("show"),this.closed=!1,this.onopen&&this.onopen()},close:function(){this.element.classList.remove("show"),this.closed=!0,this.onclose&&this.onopen()},destory:function(){this.element.remove(),e.splice(e.indexOf(this),1)},getDialogDom:function(){return l.query(this.element,".d-c")}},t}(),p=((a=function(e){this.options=e;var t=l.element("div",{class:"contextMenu"});e.offset&&(t.style.top=e.offset.top+"px",t.style.left=e.offset.left+"px",t.style.bottom=e.offset.bottom+"px",t.style.right=e.offset.right+"px"),e.list.forEach((function(e){var n=l.element("div",{class:"item"});n.innerHTML=`<div class="icon">${e.icon}</div><div class="title">${e.title}</div>`,n.onclick=function(){e.click()},t.appendChild(n)})),document.body.appendChild(t),this.element=t}).prototype={show:function(){this.element.classList.add("show"),this.element.style.height="auto";var e=this.element.getBoundingClientRect().height;this.element.style.height="0px",this.element.style.transition="height .2s";var t=this;setTimeout((function(){t.element.style.height=e+"px"}))},hide:function(){this.element.style.height="0px";var e=this;setTimeout((function(){e.element.style.transition="none",e.element.classList.remove("show")}),200)},isShow:function(){return this.element.classList.contains("show")},destory:function(){this.element.remove()},setOffset:function(e){this.options.offset=e;var t=this.options,n=this.element;t.offset&&(n.style.top=t.offset.top+"px",n.style.left=t.offset.left+"px",n.style.bottom=t.offset.bottom+"px",n.style.right=t.offset.right+"px")},setList:function(e){this.options.list=e;var t=this.options,n=this.element;n.innerHTML="",t.list.forEach((function(e){var t=l.element("div",{class:"item"});t.innerHTML=`<div class="icon">${e.icon}</div><div class="title">${e.title}</div>`,t.onclick=function(){e.click()},n.appendChild(t)}))}},document.addEventListener("click",(function(){document.querySelectorAll(".contextMenu").forEach((function(e){e.style.height="0px",setTimeout((function(){e.style.transition="none",e.classList.remove("show")}),200)}))})),a),m=function(){var e=new d.icon({class:"main_menu",content:l.getGoogleIcon("e5d2"),offset:"tr"}),t=[],n=[],i=new p({list:[],offset:{top:40,right:15}});e.getIcon().onclick=function(e){e.stopPropagation(),i.show()};return{pushMenu:function(e,o){1==o?n.push(e):t.push(e),i.setList(t.concat(n))},MAIN_MENU_BOTTOM:1,MAIN_MENU_TOP:0}}(),y=function(){var e=function(){function e(e){this.title=e.title,this.dialog=new v({content:`<div class="actionbar">\n    <h1>设置</h1><div class="closeBtn">${l.getGoogleIcon("e5cd")}</div>\n  </div>\n  <ul class="setting-root"></ul>`,class:"setting_dia",mobileShowtype:v.SHOW_TYPE_FULLSCREEN}),this.dialogDom=this.dialog.getDialogDom(),l.query(this.dialogDom,".closeBtn").addEventListener("click",(()=>{this.dialog.close()})),l.query(this.dialogDom,".actionbar h1").innerText=this.title,this.groups=[],this._events={change:[]}}return e.prototype={addNewGroup:function(e){this.groups.push(e);var t=this;e.on("change",(function(e,n){t._dochange({type:e.type,details:e.details,id:e.id}),"it"==e.type?t._dochangeGroup(n,e.details):"add"==e.type?t._drawItem(n,n.items[n.items.length-1]):"change"==e.type&&("reinit"==e.details.attr?t._reinitItem(n,n.items.find((t=>t.id==e.id)),e.details):"reget"==e.details.attr?t._regetItem(n.items.find((t=>t.id==e.id)),e.details):t._dochangeItem(n,n.items.find((t=>t.id==e.id)),e.details))})),t._dochange({type:"addgroup"}),t._drawGroup(e)},setTitle:function(e){this.title=e,l.query(this.dialogDom,".actionbar h1").innerText=e,_._dochange({type:"changetitle",title:e})},open:function(){this.dialog.open()},close:function(){this.dialog.close()},on:function(e,t){this._events[e]&&this._events[e].push(t)},_dochange:function(e){var t=this;this._events.change.forEach((function(n){n(e,t)}))},_drawGroup:function(e){var t=l.element("li",{class:"setting-group","data-index":e.index,"data-id":e.id});t.innerHTML='<div class="setting-group-title"></div><ul class="setting-tree"></ul>';for(var n=l.query(this.dialogDom,".setting-root"),i=n.children,o=!0,c=0;c<i.length;c++)if(parseInt(i[c].getAttribute("data-index"))>e.index){n.insertBefore(t,i[c]),o=!1;break}o&&n.appendChild(t),l.query(t,".setting-group-title").innerText=e.title},_drawItem:function(e,t){var n=l.element("li",{class:"setting-item","data-index":t.index,"data-id":t.id});n.innerHTML='<div class="setting-item-left">\n<div class="setting-item-title"></div>\n<div class="setting-item-message"></div>\n</div>\n<div class="setting-item-right"></div>';for(var i=l.query(this.dialogDom,".setting-group[data-id="+e.id+"] .setting-tree"),o=i.children,c=!0,s=0;s<o.length;s++)if(parseInt(o[s].getAttribute("data-index"))>t.index){i.insertBefore(n,o[s]),c=!1;break}c&&i.appendChild(n),l.query(n,".setting-item-title").innerText=t.title,t.message?l.query(n,".setting-item-message").innerText=t.message:n.classList.add("no-message");var a=l.query(n,".setting-item-right"),r=function(){};function u(){if("null"!=t.type){var e=t.get();e instanceof Promise?e.then(r):r(e)}}({string:function(){a.innerHTML='<input type="text" class="setting-item-input">',r=function(e){l.query(a,".setting-item-input").value=e}},number:function(){a.innerHTML='<input type="number" class="setting-item-input">',r=function(e){l.query(a,".setting-item-input").value=e}},boolean:function(){a.innerHTML='<div class="check-box"><div class="check-box-inner"></div><input type="checkbox" class="setting-item-input"></div>',r=function(e){l.query(a,".setting-item-input").checked=e,e&&l.query(a,".check-box").classList.add("checked"),l.query(a,".check-box").addEventListener("click",(function(){l.query(a,".setting-item-input").click(),l.query(a,".setting-item-input").checked?this.classList.add("checked"):this.classList.remove("checked")}))}},range:function(){a.innerHTML='<input type="range" class="setting-item-input">',r=function(e){l.query(a,".setting-item-input").value=e};var e=t.init();function n(e){l.query(a,".setting-item-input").max=e.max,l.query(a,".setting-item-input").min=e.min}e instanceof Promise?e.then(n):n(e)},select:function(){var e;a.innerHTML='<select class="setting-item-input"></select>',r=function(t){e=t};var n=t.init();function i(t){l.query(a,".setting-item-input").innerHTML=(()=>{var e="";for(var n in t)e+=`<option value="${n}">${t[n]}</option>`;return e})(),r=function(e){l.query(a,".setting-item-input").value=e},e&&r(e)}n instanceof Promise?n.then(i):i(n)},null:function(){a.innerHTML=`<div class="setting-item-input null-click">${l.getGoogleIcon("e5e1")}</div>`,n.classList.add("just-callback-item"),n.onclick=function(){t.callback()}}})[t.type](),u(),t.getacb=u,l.query(a,".setting-item-input").addEventListener("range"==t.type?"input":"null"==t.type?"click":"change",(function(e){var n;this.classList.contains("null-click")||(n="checkbox"==this.type?this.checked:this.value,"function"==typeof t.check?t.check(n)?t.callback(n):u():t.callback(n))}))},_dochangeGroup:function(e,t){var n=l.query(this.dialogDom,".setting-group[data-id="+e.id+"]");if("title"==t.attr)l.query(n,".setting-group-title").innerText=t.content;else if("index"==t.attr){n.setAttribute("data-index",t.content);for(var i=l.query(this.dialogDom,".setting-root"),o=i.children,c=!0,s=0;s<o.length;s++)if(!o[s].isSameNode(n)&&parseInt(o[s].getAttribute("data-index"))>t.content){i.insertBefore(n,o[s]),c=!1;break}c&&i.appendChild(n)}else"show"==t.attr&&(n.style.display=t.content?"block":"none")},_dochangeItem:function(e,t,n){var i=l.query(this.dialogDom,".setting-group[data-id="+e.id+"] .setting-item[data-id="+t.id+"]");if("title"==n.attr)l.query(i,".setting-group-title").innerText=n.content;else if("message"==n.attr)n.content?(l.query(i,".setting-item-message").innerText=n.content,i.classList.remove("no-message")):i.classList.add("no-message");else if("index"==n.attr){i.setAttribute("data-index",n.content);for(var o=l.query(this.dialogDom,".setting-group[data-id="+e.id+"] .setting-tree"),c=o.children,s=!0,a=0;a<c.length;a++)if(!c[a].isSameNode(i)&&parseInt(c[a].getAttribute("data-index"))>n.content){o.insertBefore(i,c[a]),s=!1;break}s&&o.appendChild(i)}else"show"==n.attr&&(i.style.display=n.content?"block":"none")},_reinitItem:function(e,t){var n,i=l.query(this.dialogDom,".setting-group[data-id="+e.id+"] .setting-item[data-id="+t.id+"]"),o=l.query(i,".setting-item-right");if("range"==t.type)n=function(e){l.query(o,".setting-item-input").max=e.max,l.query(o,".setting-item-input").min=e.min};else{if("select"!=t.type)return;n=function(e){l.query(o,".setting-item-input").innerHTML=(()=>{var t="";for(var n in e)t+=`<option value="${n}">${e[n]}</option>`;return t})(),cb=function(e){l.query(o,".setting-item-input").value=e},guaqi&&cb(guaqi)}}var c=t.init();c instanceof Promise?c.then(n):n(c)},_regetItem:function(e){e.getacb()}},e}(),t=function(){function e(e){this.title=e.title,this.index=e.index,this.index<0&&(this.index=0),this.items=[],this.id="seg_"+l.getRandomHashCache(),this._events={change:[]}}return e.prototype={addNewItem:function(e){this.items.push(e);var t=this;e.on("change",(function(e,n){t._dochange({type:"change",details:e,id:n.id})})),t._dochange({type:"add"})},setTitle:function(e){this.title=e,this._dochange({type:"it",details:{attr:"title",content:e}})},setIndex:function(e){this.index=e,this._dochange({type:"it",details:{attr:"index",content:e}})},on:function(e,t){this._events[e]&&this._events[e].push(t)},show:function(){this.show=!0,this._dochange({type:"it",details:{attr:"show",content:!0}})},hide:function(){this.show=!1,this._dochange({type:"it",details:{attr:"show",content:!1}})},_dochange:function(e){var t=this;this._events.change.forEach((function(n){n(e,t)}))}},e}(),n=function(){function e(e){this.title=e.title,this.index=e.index,this.type=e.type,this.init=e.init,this.check=e.check,this.callback=e.callback,this.message=e.message,this.get=e.get,this._show=!0,this.id="sei_"+l.getRandomHashCache(),this._events={change:[]}}return e.prototype={reInit:function(){this._dochange({attr:"reinit"})},reGet:function(){this._dochange({attr:"reget"})},setTitle:function(e){this.title=e,this._dochange({attr:"title",content:e})},setIndex:function(e){this.index=e,this._dochange({attr:"index",content:e})},setMessage:function(e){this.message=e,this._dochange({attr:"message",content:e})},show:function(){this._show=!0,this._dochange({attr:"show",content:!0})},hide:function(){this._show=!1,this._dochange({attr:"show",content:!1})},on:function(e,t){this._events[e]&&this._events[e].push(t)},_dochange:function(e){var t=this;this._events.change.forEach((function(n){n(e,t)}))}},e}(),i=function(){var t=new e({title:"设置"});return m.pushMenu({icon:l.getGoogleIcon("e8b8",{type:"fill"}),title:"主设置",click:function(){t.open()}},m.MAIN_MENU_TOP),t}();new d.icon({content:l.getGoogleIcon("e8b8",{type:"fill"}),offset:"bl"}).getIcon().onclick=function(){i.open()};var o=new t({title:"通用",index:0});return i.addNewGroup(o),{Setting:e,SettingGroup:t,SettingItem:n,mainSetting:i,tyGroup:o}}(),b=y.Setting,k=y.SettingGroup,w=y.SettingItem,q=y.mainSetting,L=y.tyGroup,x=function(){var e={focus:[],blur:[],input:[],beforeenter:[],afterenter:[]},t=new k({title:"搜索框",index:1});q.addNewGroup(t);var n=function(){var e={SA:[],enter:[]},n=g("omnibox",{sync:!0}),i=[],o=function(t){for(var n=0;n<e.enter.length;n++)if(e.enter[n].check(t))return e.enter[n]},c=function(t){e.enter.unshift(t)},s=function(t){e.SA.push(t)},a=function(){if(g){var e=g("search",{sync:!0}),t="%keyword%",n={bing:"https://cn.bing.com/search?q="+t,baidu:"https://www.baidu.com/s?wd="+t,so:"https://so.com/s?q="+t,sogou:"https://sogou.com/web?query="+t,google:"https://google.com/search?q="+t};e.get("typelist")||e.set("typelist",n),e.get("type")||e.set("type","bing");var i={},o=function(e,t){i[e]&&i[e].forEach((function(e){e.apply(null,t)}))},c={getSearchType:function(){return e.get("typelist")[e.get("type")]},addEventListener:function(e,t){i[e]?i[e].push(t):i[e]=[t]},setSearchList:function(t){if(0==Object.keys(t).length)throw new Error("newList is empty");e.set("typelist",t);var n=e.get("typelist");o("typelistchange");var i=e.get("type");n[i]!=t[i]&&o("nowtypechange")},getSearchTypeList:function(){return e.get("typelist")},setSearchType:function(t){e.set("type",t),o("nowtypechange")},getSearchTypeIndex:function(){return e.get("type")}};return Object.defineProperty(c,"keywordText",{get:function(){return t}}),c}}();function r(e){return!n.get("justsearch")&&/^(https?:\/\/)?([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&%\$\-]+)*@)?((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.[a-zA-Z]{2,4})(\:[0-9]+)?(\/[^\/][a-zA-Z0-9\.\,\?\'\\\/\+&%\$#\=~_\-@]*)*(\/)?$/.test(e)}c({check:function(){return!0},enter:function(e){open(a.getSearchType().replace(a.keywordText,e))},icon:":searchtype",submit:l.getGoogleIcon("E8B6")}),c({check:r,enter:function(e){-1==e.indexOf("://")&&(e="http://"+e),open(e)},icon:l.getGoogleIcon("E80B"),submit:l.getGoogleIcon("E89E")}),s({check:function(e){return!!e},get:function(e,t){var n=t();return n.unshift({icon:l.getGoogleIcon("E8B6"),text:e,click:function(){open(a.getSearchType().replace(a.keywordText,e))}}),n}});var u=null;s({check:function(e){return!!e},get:function(e,t){return new Promise((function(n,i){var o=t();u=l.jsonp("https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&wd="+e,(function(e){u=null,e.g?(e.g.forEach((function(e){o.push({icon:l.getGoogleIcon("E8B6"),text:e.q,click:function(){open(a.getSearchType().replace(a.keywordText,e.q))}})})),n(o)):n(o)}),"cb")}))},interrupt:function(){u&&(u.abort(),u=null)}}),s({check:r,get:function(e,t){return new Promise((function(n,i){var o=t();o.unshift({icon:l.getGoogleIcon("E80B"),text:e,click:function(){-1==e.indexOf("://")&&(e="http://"+e),open(e)}}),n(o)}))}});var d=new w({title:"搜索框仅搜索",index:1,type:"boolean",message:"打开后，搜索框将失去打开链接的功能",get:function(){return!!n.get("justsearch")},callback:function(e){return n.set("justsearch",e),!0}});return t.addNewItem(d),{getSA:function(t,n){i.length>0&&i.forEach((function(t){e.SA[t].interrupt()}));for(var o=[],c=e.SA.length,s=0;s<c;s++)if(e.SA[s].check(t)){var a=e.SA[s].get(t,(function(){return o}));a instanceof Promise?(i.push(s),function(e){a.then((function(t){o=t,i.splice(i.indexOf(e),1),n(o)}))}(s)):n(o=a)}},enter:function(e){o(e).enter(e)},getType:o,addNewType:c,addNewSA:s,searchUtil:a,initsto:n}}(),i=function(){"use strict";var i=l.element("div",{class:"searchbox"}),o=l.element("div",{class:"cover searchcover"}),c=l.element("div",{class:"searchpadding"});i.innerHTML='\n  <div class="box">\n    <div class="icon"></div>\n    <div class="input">\n      <input type="text" placeholder="搜索或输入网址"/>\n    </div>\n    <div class="submit"></div>\n    </div>\n  <ul class="sas"></ul>\n  ',l.query(document,"main").append(i),l.query(document,"main").append(o),l.query(document,"main .center").append(c);var s=l.query(i,"div.icon"),a=l.query(i,"div.input input"),r=l.query(i,"div.submit"),u=l.query(i,"ul.sas");function d(e){var t=n.getType(e);":"==t.icon[0]?(s.setAttribute("data-teshu",t.icon),s.innerHTML=function(e){return":searchtype"==e?`<img src=${l.getFavicon(n.searchUtil.getSearchType())} onerror='this.src=quik.util.getFavicon(this.src,true)'>`:""}(t.icon)):(s.innerHTML=t.icon,s.removeAttribute("data-teshu")),":"==t.submit[0]?(r.setAttribute("data-teshu",t.submit),r.innerHTML=(t.submit,"")):(r.innerHTML=t.submit,r.removeAttribute("data-teshu"))}function g(){d(this.value.trim()),u.innerHTML="",n.getSA(this.value.trim(),(function(e){var t=l.query(u,"li.active");t&&(t={icon:l.query(t,"div.saicon").innerHTML,text:l.query(t,"div.sa_text").innerHTML}),u.innerHTML="",e.forEach((function(e){var t=l.element("li");t.innerHTML=`<div class="saicon">${e.icon}</div><div class="sa_text">${e.text}</div>`,u.append(t),t.onclick=e.click})),t&&l.query(u,"li",!0).forEach((function(e){l.query(e,"div.saicon").innerHTML&&l.query(e,"div.sa_text").innerHTML==t.text&&e.classList.add("active")}))})),e.input.forEach((function(e){e(a.value)}))}a.oninput=l.fangdou(g,300),a.onkeydown=function(e){if("Enter"==e.key)(t=l.query(u,"li.active"))?t.click():n.enter(this.value);else if("ArrowUp"==e.key){e.preventDefault(),(t=l.query(u,"li.active"))&&(t.classList.remove("active"),t.previousElementSibling&&t.previousElementSibling.classList.add("active"))}else if("ArrowDown"==e.key){e.preventDefault(),(t=l.query(u,"li.active"))?t.nextElementSibling&&(t.classList.remove("active"),t.nextElementSibling.classList.add("active")):l.query(u,"li").classList.add("active")}else if("ArrowRight"==e.key){var t;(t=l.query(u,"li.active"))&&(a.value=l.query(t,".sa_text").innerText,g.call(this))}},a.addEventListener("focus",(function(){o.classList.add("active"),i.classList.add("active"),e.focus.forEach((function(e){e(a)}))})),a.addEventListener("blur",(function(){setTimeout((function(){o.classList.remove("active"),i.classList.remove("active"),e.blur.forEach((function(e){e(a)}))}),5)})),r.onclick=function(){n.enter(a.value)};var f=l.element("div",{class:"searchtypeselector"});function h(){var e=l.query(f,"ul"),t=n.searchUtil.getSearchTypeIndex();e.innerHTML="";var i=n.searchUtil.getSearchTypeList();for(var o in i){var c=l.element("li");c.innerHTML=`<img src=${l.getFavicon(i[o])} onerror='this.src=quik.util.getFavicon(this.src,true)'>`,c.setAttribute("data-type",o),e.append(c),o==t&&c.classList.add("active"),c.onclick=function(){var e=l.query(f,"ul li.active");e&&e.classList.remove("active"),this.classList.add("active"),n.searchUtil.setSearchType(this.getAttribute("data-type")),f.classList.remove("active")}}f.style.width=36*l.query(e,"li",!0).length+"px"}f.innerHTML="<ul></ul>",l.query(document,"main .center").append(f),s.addEventListener("click",(function(){f.classList.contains("active")?f.classList.remove("active"):f.classList.add("active")})),n.searchUtil.addEventListener("nowtypechange",(function(){":searchtype"==s.getAttribute("data-teshu")&&d(a.value)})),n.searchUtil.addEventListener("typelistchange",(function(){h()})),h(),d(""),n.initsto.get("autofocus")&&setTimeout((function(){a.focus()}));var v=new w({title:"自动聚焦",index:1,type:"boolean",message:"打开页面自动聚焦搜索框",get:function(){return!!n.initsto.get("autofocus")},callback:function(e){return n.initsto.set("autofocus",e),!0}});return t.addNewItem(v),{setValue:function(e){a.value=e,a.focus()}}}();return{value:i.setValue,addNewSug:n.addNewSA,addEventListener:function(t,n){e[t]&&e[t].push(n)},getSearchType:n.searchUtil.getSearchType,getSearchTypeList:n.searchUtil.getSearchTypeList,getSearchTypeIndex:n.searchUtil.getSearchTypeIndex,setSearchType:n.searchUtil.setSearchType,setSearchList:n.searchUtil.setSearchList,search:{addEventListener:n.searchUtil.addEventListener},sg:t}}(),T=function(){var e,t=g("link",{sync:!0}),n={change:[]};function i(e,t){var n={title:e.title,url:e.url};return"number"==typeof e.index&&e.index>=0?e.index>t.length?t.push(n):t.splice(e.index,0,n):t.push(n),t}function o(e,t,n){if(!n[e])return!1;var i={title:t.title,url:t.url};if(n[e]=i,"number"==typeof t.index&&t.index>=0)if(t.index>=n.length);else{var o=n.splice(e,1)[0];n.splice(t.index,0,o)}return n}function c(e){return e.url.length>1e3?"url":e.title.length>60&&"title"}return g.checkIDB()?e=function(){t.set("storage-mode","db");var e=0;t.get("links")?e++:t.set("links",[],!0,(function(){2==++e&&c()})),t.get("cate")?e++:t.set("cate",{},!0,(function(){2==++e&&c()}));var c=function(){};function s(e,t){n[e].forEach((function(e){e.apply(null,[t])}))}return 2==e&&c(),{addLink:function(n,o=function(){}){if(2!=e)throw"初始化未完成";if(!l.checkDetailsCorrect(n,["title","url"]))throw"参数不正确";n.cate?t.get("cate",!0,(function(e){e[n.cate]?(e[n.cate]=i(n,e[n.cate]),t.set("cate",e,!0,(function(){o({code:0,msg:"添加成功"}),s("change",{cate:n.cate,type:"add",detail:n})}))):o({code:-1,msg:"分组不存在"})})):t.get("links",!0,(function(e){e=i(n,e),t.set("links",e,!0,(function(){o({code:0,msg:"添加成功"}),s("change",{cate:null,type:"add",detail:n})}))}))},changeLink:function(n,i,c,a=function(){}){if(2!=e)throw"初始化未完成";if(!l.checkDetailsCorrect(c,["title","url"])||"number"!=typeof i)throw"参数错误";n?t.get("cate",!0,(function(e){if(e[n]){var r=o(i,c,e[n]);r?(e[n]=r,t.set("cate",e,!0,(function(){a({code:0,msg:"修改成功"}),s("change",{cate:n,index:i,type:"change",detail:c})}))):a({code:-2,msg:"链接不存在"})}else a({code:-1,msg:"分组不存在"})})):t.get("links",!0,(function(e){var n=o(i,c,e);n?(e=n,t.set("links",e,!0,(function(){a({code:0,msg:"修改成功"}),s("change",{cate:null,index:i,type:"change",detail:c})}))):a({code:-2,msg:"链接不存在"})}))},deleteLink:function(n,i,o=function(){}){if(2!=e)throw"初始化未完成";n?t.get("cate",!0,(function(e){e[n]?e[n][i]?(e[n].splice(i,1),t.set("cate",e,!0,(function(){o({code:0,msg:"删除成功"}),s("change",{cate:n,index:i,type:"delete"})}))):o({code:-2,msg:"链接不存在"}):o({code:-1,msg:"分组不存在"})})):t.get("links",!0,(function(e){e[i]?(e.splice(i,1),t.set("links",e,!0,(function(){o({code:0,msg:"删除成功"}),s("change",{cate:null,index:i,type:"delete"})}))):o({code:-2,msg:"链接不存在"})}))},addCate:function(n,i=function(){}){if(2!=e)throw"初始化未完成";t.get("cate",!0,(function(e){e[n]?i({code:-1,msg:"分组已存在"}):(e[n]=[],t.set("cate",e,!0,(function(){i({code:0,msg:"添加成功"}),s("change",{cate:n,type:"cateadd"})})))}))},renameCate:function(n,i,o=function(){}){if(2!=e)throw"初始化未完成";t.get("cate",!0,(function(e){e[n]?(e[i]&&o({code:-2,msg:"分组重名"}),e[i]=e[n],delete e[n],t.set("cate",e,!0,(function(){o({code:0,msg:"修改成功"}),s("change",{cate:n,catename:i,type:"caterename"})}))):o({code:-1,msg:"分组不存在"})}))},deleteCate:function(n,i=function(){}){if(2!=e)throw"初始化未完成";t.get("cate",!0,(function(e){e[n]?e[n].length<=1?(delete e[n],t.set("cate",e,!0,(function(){i({code:0,msg:"删除成功"}),s("change",{cate:n,type:"catedelete"})}))):C("确定要删除分组吗？无法恢复！",(function(o){o?(delete e[n],t.set("cate",e,!0,(function(){i({code:0,msg:"删除成功"}),s("change",{cate:n,type:"catedelete"})}))):i({code:-2,msg:"用户取消删除"})})):i({code:-1,msg:"分组不存在"})}))},getLinks:function(n,i=function(){}){if(2!=e)throw"初始化未完成";n?t.get("cate",!0,(function(e){e[n]?i({code:0,msg:"获取成功",data:e[n]}):i({code:-1,msg:"分组不存在"})})):t.get("links",!0,(function(e){i({code:0,msg:"获取成功",data:e})}))},getCates:function(e=function(){}){t.get("cate",!0,(function(t){e({code:0,msg:"获取成功",data:Object.keys(t)})}))},getCateAll:function(e=function(){}){t.get("cate",!0,(function(t){e({code:0,msg:"获取成功",data:t})}))},ready:function(t){2==e?t():c=t},addEventListener:function(e,t){n[e]?n[e].push(t):n[e]=[t]},removeEventListener:function(e,t){n[e]&&n[e].forEach((function(i,o){i===t&&n[e].splice(o,1)}))}}}():(t.set("storage-mode","localstorage"),t.get("links")||t.set("links",[]),t.get("cate")||t.set("cate",{}),e={addLink:function(e,n=function(){}){if(!l.checkDetailsCorrect(e,["title","url"]))throw"参数不正确";var o=c(e);if(o&&n({code:-3,msg:"受限模式下，"+o+"长度过长",lm:o}),e.cate){var s=t.get("cate");if(s[e.cate]){if(s[e.cate].length>100)return void n({code:-4,msg:"受限模式下，分组下已超过100条链接，无法添加"});s[e.cate]=i(e,s[e.cate]),t.set("cate",s),n({code:0,msg:"添加成功"}),doevents("change",{cate:e.cate,type:"add",detail:e})}else n({code:-1,msg:"分组不存在"})}else{var a=t.get("links");if(a.length>100)return void n({code:-4,msg:"受限模式下，分组下已超过100条链接，无法添加"});a=i(e,a),t.set("links",a),n({code:0,msg:"添加成功"}),doevents("change",{cate:null,type:"add",detail:e})}},changeLink:function(e,n,i,s=function(){}){if(!l.checkDetailsCorrect(i,["title","url"])||"number"!=typeof n)throw"参数错误";var a=c(i);if(a&&s({code:-3,msg:"受限模式下，"+a+"长度过长",lm:a}),e){var r=t.get("cate");if(!r[e])return void s({code:-1,msg:"分组不存在"});if(!(u=o(n,i,r[e])))return void s({code:-2,msg:"链接不存在"});r[e]=u,t.set("cate",r),s({code:0,msg:"修改成功"}),doevents("change",{cate:e,index:n,type:"change",detail:i})}else{var u,d=t.get("links");if(!(u=o(n,i,d)))return void s({code:-2,msg:"链接不存在"});d=u,t.set("links",d),s({code:0,msg:"修改成功"}),doevents("change",{cate:null,index:n,type:"change",detail:i})}},deleteLink:function(e,n,i=function(){}){if(e){var o=t.get("cate");if(!o[e])return void i({code:-1,msg:"分组不存在"});if(!o[e][n])return void i({code:-2,msg:"链接不存在"});o[e].splice(n,1),t.set("cate",o),i({code:0,msg:"删除成功"}),doevents("change",{cate:e,index:n,type:"delete"})}else{var c=t.get("links");if(!c[n])return void i({code:-2,msg:"链接不存在"});c.splice(n,1),t.set("links",c),i({code:0,msg:"删除成功"}),doevents("change",{cate:null,index:n,type:"delete"})}},addCate:function(e,n=function(){}){var i=t.get("cate");i[e]?n({code:-1,msg:"分组已存在"}):Object.keys(i).length>=20?n({code:-2,msg:"受限模式下，分组数量不能超过20个"}):(i[e]=[],t.set("cate",i),n({code:0,msg:"添加成功"}),doevents("change",{cate:e,type:"cateadd"}))},renameCate:function(e,n,i=function(){}){var o=t.get("cate");o[e]?(o[n]&&i({code:-2,msg:"分组重名"}),o[n]=o[e],delete o[e],t.set("cate",o),i({code:0,msg:"修改成功"}),doevents("change",{cate:e,catename:n,type:"caterename"})):i({code:-1,msg:"分组不存在"})},deleteCate:function(e,n=function(){}){var i=t.get("cate");i[e]?i[e].length<=1?(delete i[e],t.set("cate",i),n({code:0,msg:"删除成功"})):C("确定要删除分组吗？无法恢复！",(function(o){o?(delete i[e],t.set("cate",i),n({code:0,msg:"删除成功"}),doevents("change",{cate:e,type:"catedelete"})):n({code:-2,msg:"用户取消删除"})})):n({code:-1,msg:"分组不存在"})},getLinks:function(e,n=function(){}){if(e){if(!(i=t.get("cate"))[e])return void n({code:-1,msg:"分组不存在"});n({code:0,msg:"获取成功",data:i[e]})}else{var i;n({code:0,msg:"获取成功",data:i=t.get("links")})}},getCates:function(e=function(){}){var n=t.get("cate");e({code:0,msg:"获取成功",data:Object.keys(n)})},getCateAll:function(e=function(){}){e({code:0,msg:"获取成功",data:t.get("cate")})},ready:function(e){e()},addEventListener:function(e,t){n[e]?n[e].push(t):n[e]=[t]},removeEventListener:function(e,t){n[e]&&n[e].forEach((function(i,o){i===t&&n[e].splice(o,1)}))}}),function(){var n=l.element("div",{class:"links"});function i(e,t){for(var n=0;n<t.length;n++)if(t[n].isSameNode(e))return n;return-1}l.query(document,"main .center").append(n);var o,c,s=null,a=[],r=new p({list:[{icon:l.getGoogleIcon("e3c9"),title:"修改",click:function(){var e=i(s,l.query(n,".link-list li",!0)),t=l.query(n,".cate-bar-items .cate-item.active");b(e,t=t.classList.contains("mr")?null:t.innerText)}},{icon:l.getGoogleIcon("e92e"),title:"删除",click:function(){var t=i(s,l.query(n,".link-list li",!0)),o=l.query(n,".cate-bar-items .cate-item.active");o=o.classList.contains("mr")?null:o.innerText,e.deleteLink(o,t,(function(){u.show("删除成功")}))}}]}),d=null,g=new p({list:[{icon:l.getGoogleIcon("e3c9"),title:"重命名",click:function(){L(d.innerText)}},{icon:l.getGoogleIcon("e92e"),title:"删除",click:function(){var t=d.innerText;e.deleteCate(t,(function(e){0==e?u.show("删除成功"):u.show(e.msg)}))}}]});function f(e){var t=l.element("div",{class:"cate-item"});t.innerText=e,l.query(n,".cate-bar-items").append(t),t.onclick=function(){y(this)},t.oncontextmenu=function(e){e.preventDefault(),d=this,g.setOffset({top:e.pageY,left:e.pageX}),g.show()}}function h(){0==this.scrollLeft?l.query(n,".cate-left-btn").classList.add("disabled"):l.query(n,".cate-left-btn").classList.remove("disabled"),this.scrollLeft>=this.scrollWidth-this.getBoundingClientRect().width?l.query(n,".cate-right-btn").classList.add("disabled"):l.query(n,".cate-right-btn").classList.remove("disabled")}function m(){var e=l.query(n,".cate-bar-items .cate-item",!0),t=0;e.forEach((function(e){t+=e.getBoundingClientRect().width+4})),l.query(n,".cate-bar-items").style.width=t+"px",h.call(l.query(n,".cate-bar-scrolls"))}function y(t){l.query(n,".link-list").innerHTML="";var i=null;if("string"==typeof t){try{l.query(n,".cate-bar-items .cate-item.active").classList.remove("active")}catch(e){}for(var o=l.query(n,".cate-bar-items .cate-item",!0),c=0;c<o.length;c++)if(!o[c].classList.contains("mr")&&o[c].innerText==t){o[c].classList.add("active");break}i=t}else if(t){try{l.query(n,".cate-bar-items .cate-item.active").classList.remove("active")}catch(e){}t.classList.add("active"),i=t.innerText}else{try{l.query(n,".cate-bar-items .cate-item.active").classList.remove("active")}catch(e){}l.query(n,".cate-bar-items .cate-item.mr").classList.add("active")}e.getLinks(i,(function(e){a=e.data,e.data.forEach((function(e){var t=l.element("li");t.innerHTML=`<a href="${e.url}" target="_blank" rel="noopener noreferer">\n   <img src="${l.getFavicon(e.url,!0)}" onerror='this.src=quik.util.getFavicon(this.parentElement.href)'/>\n   <p></p>\n </a>`,l.query(n,".link-list").append(t),l.query(t,"p").innerText=e.title,t.oncontextmenu=function(e){e.preventDefault(),s=this,r.setOffset({top:e.pageY,left:e.pageX}),r.show()}}));var t=l.element("li",{class:"link-add"});t.innerHTML='<a href="javascript:void(0)" class="material-symbols-outlined">&#xe145;</a>',l.query(n,".link-list").append(t),t.onclick=function(){var e=l.query(n,".cate-bar-items .cate-item.active");b(-1,e=e.classList.contains("mr")?null:e.innerText)}}))}function b(t,n){if(!o){var i=(o=new v({class:"link-add-dialog",content:'<form>\n          <h1></h1>\n          <div class="content">\n            <p>URL ：<input class="link-add-url" type="url" required placeholder="链接地址(必填)"/></p>\n            <p>标题：<input class="link-add-title" type="text" required placeholder="链接标题(必填)"/></p>\n            <p>位置：<input class="link-add-index" type="number" min="0" placeholder="链接位置"/></p>\n          </div>\n          <div class="footer">\n            <div class="cancel btn">取消</div>\n            <button class="ok btn"></button>\n          </div>\n        </form>'})).getDialogDom();l.query(i,".cancel.btn").onclick=function(e){e.preventDefault(),o.close()}}setTimeout((function(){o.open();var i=o.getDialogDom();-1==t?(l.query(i,"h1").innerHTML="添加链接",l.query(i,".ok.btn").innerHTML="添加",l.query(i,"input.link-add-url").value="",l.query(i,"input.link-add-title").value="",l.query(i,"input.link-add-index").setAttribute("max",a.length),l.query(i,"input.link-add-index").value=l.query(i,"input.link-add-index").max,l.query(i,"form").onsubmit=function(t){t.preventDefault();var c=l.query(i,".link-add-url").value,s=l.query(i,".link-add-title").value,a=l.query(i,".link-add-index").value;a=void 0===a?l.query(i,".link-add-index").max-0:a,e.addLink({url:c,title:s,index:a,cate:n},(function(){u.show("添加成功")})),o.close()}):(l.query(i,"h1").innerHTML="修改链接",l.query(i,".ok.btn").innerHTML="修改",l.query(i,"input.link-add-url").value=a[t].url,l.query(i,"input.link-add-title").value=a[t].title,l.query(i,"input.link-add-index").value=t,l.query(i,"input.link-add-index").setAttribute("max",a.length-1),l.query(i,"form").onsubmit=function(c){c.preventDefault();var s=l.query(i,".link-add-url").value,a=l.query(i,".link-add-title").value,r=l.query(i,".link-add-index").value-0;r=void 0===t?t:r,e.changeLink(n,t,{url:s,title:a,index:r},(function(){u.show("修改成功")})),o.close()})}))}function L(t){c||(c=new v({class:"link-add-dialog",content:'<form>\n          <h1></h1>\n          <div class="content">\n            <p>标题：<input class="cate-name" type="text" required placeholder="分组标题(必填)"/></p>\n          </div>\n          <div class="footer">\n            <div class="cancel btn">取消</div>\n            <button class="ok btn">确定</button>\n          </div>\n        </form>'}));var n=c.getDialogDom();l.query(n,".cancel.btn").onclick=function(e){e.preventDefault(),c.close()},setTimeout((function(){c.open(),t?(l.query(n,"h1").innerHTML="修改分组",l.query(n,".cate-name").value=t,l.query(n,"form").onsubmit=function(i){i.preventDefault();var o=l.query(n,".cate-name").value;e.renameCate(t,o,(function(e){e.code<0?u.show(e.msg):(u.show("修改成功"),c.close())}))}):(l.query(n,"h1").innerHTML="添加分组",l.query(n,".cate-name").value="",l.query(n,"form").onsubmit=function(t){t.preventDefault();var i=l.query(n,".cate-name").value;e.addCate(i,(function(e){e.code<0?u.show(e.msg):(u.show("添加成功"),c.close())}))})}))}window.addEventListener("resize",(function(){h.call(l.query(n,".cate-bar-scrolls"))})),e.addEventListener("change",(function(e){var t=l.query(n,".cate-bar-items .cate-item.active");if((e.cate==t.innerText||null==e.cate&&t.classList.contains("mr"))&&-1!=["add","change","delete"].indexOf(e.type)&&y(e.cate),"cateadd"==e.type)f(e.cate);else if("catedelete"==e.type){for(var i=l.query(n,".cate-bar-items .cate-item",!0),o=0;o<i.length;o++)if(i[o].innerText==e.cate){i[o].classList.contains("active")&&(y(),l.query(n,".cate-bar-items .cate-item.mr").classList.add("active")),i[o].remove();break}}else if("caterename"==e.type)for(i=l.query(n,".cate-bar-items .cate-item",!0),o=0;o<i.length;o++)if(i[o].innerText==e.cate){i[o].innerText=e.catename;break}})),n.innerHTML=`<div class="cate-bar">\n      <div class="cate-bar-controls">\n        <div class="cate-left-btn">${l.getGoogleIcon("e314")}</div>\n      </div>\n      <div class="cate-bar-scrolls">\n        <div class="cate-bar-items">\n          <div class="cate-item mr active">默认</div>\n        </div>\n      </div>\n      <div class="cate-bar-controls">\n      <div class="cate-right-btn">${l.getGoogleIcon("e315")}</div>\n        <div class="cate-add-btn">${l.getGoogleIcon("e145")}</div>\n      </div>\n    </div>\n    <ul class="link-list"></ul>`,e.ready((function(){function i(e){if(e<0)return 0;var t=l.query(n,".cate-bar-scrolls").scrollWidth-l.query(n,".cate-bar-scrolls").getBoundingClientRect().width;return e>t?t:void 0}e.getCates((function(e){e.data.forEach((function(e){f(e)}))})),l.query(n,".cate-item.mr").onclick=function(){try{l.query(n,".cate-bar-items .cate-item.active").classList.remove("active")}catch(e){}this.classList.add("active"),y()},l.query(n,".cate-add-btn").onclick=function(){L()},l.query(n,".cate-left-btn").onclick=function(){l.query(n,".cate-bar-scrolls").scrollTo({left:i(l.query(n,".cate-bar-scrolls").scrollLeft-l.query(n,".cate-bar-scrolls").getBoundingClientRect().width/2),behavior:"smooth"})},l.query(n,".cate-right-btn").onclick=function(){l.query(n,".cate-bar-scrolls").scrollTo({left:i(l.query(n,".cate-bar-scrolls").scrollLeft+l.query(n,".cate-bar-scrolls").getBoundingClientRect().width/2),behavior:"smooth"})},l.query(n,".cate-bar-scrolls").onscroll=function(){h.call(this)},h.call(l.query(n,".cate-bar-scrolls")),I(t.get("enabledCate")),S(t.get("linksize"))})),new MutationObserver((function(){setTimeout(m,1)})).observe(l.query(n,".cate-bar-items"),{childList:!0,attributes:!0}),t.get("enabledCate")||t.set("enabledCate",!0),t.get("linksize")||t.set("linksize","m");var x=new k({title:"链接"}),T=new w({type:"boolean",title:"链接分组",message:"启用链接分组功能来管理链接",get:function(){return t.get("enabledCate")},callback:function(e){t.set("enabledCate",e),I(e)}}),_=new w({type:"select",title:"链接大小",message:"修改链接显示的大小",init:function(){return{xs:"很小",s:"小",m:"中",l:"大",xl:"很大"}},get:function(){return t.get("linksize")},callback:function(e){t.set("linksize",e),S(e)}});function I(e){y(),e?(l.query(n,".cate-bar").style.display="block",setTimeout((function(){m()}))):l.query(n,".cate-bar").style.display="none"}function S(e){l.query(n,".link-list").className="link-list "+e}q.addNewGroup(x),x.addNewItem(T),x.addNewItem(_)}(),e}(),I=function(){var e=g("says"),t=l.element("div",{class:"says"});l.query(document,"main").appendChild(t);t.innerHTML=`<div class="say-inner"></div><div class="say-control">${l.getGoogleIcon("e5d4")}</div>`;var n=l.query(t,"div.say-inner"),i=l.query(t,"div.say-control"),o=new p({list:[]}),c=new v({content:`<div class="closeBtn">${l.getGoogleIcon("e5cd")}</div><ul></ul>`,class:"says_info"}),s=c.getDialogDom();l.query(s,"div.closeBtn").onclick=function(){c.close()};var a,r={},u={};function d(e){r[e.key]={name:e.name,callback:e.callback,click:e.click||function(){},menu:e.menu||[{icon:l.getGoogleIcon("e14d"),title:"复制",click:function(){var e=u.say;l.copyText(e)}}]}}function f(t,i){if(l.checkSession(t)&&(t=t.id),!r[t])throw"type不存在 type:"+t;e.set("saytype",t),o.setList(r[t].menu),n.onclick=r[t].click,h(t,i),b.reGet()}function h(e,t){if(l.checkSession(e)&&(e=e.id),!r[e])throw"key不存在";n.innerText="...",n.title="加载中",r[e].callback().then((function(e){n.innerText=e.say,n.setAttribute("title",e.title),u=e,t&&t()}))}function m(e){l.query(s,"ul").innerHTML=function(){var t="";for(var n in e)t+="<li><b>"+n+":</b> "+e[n]+"</li>";return t}(),c.open()}d(function(){e.get("usersay")||e.set("usersay","海内存知己，天涯若比邻");var t=null;function n(){if(!t){var n=(t=new v({class:"sayseditordialog",content:'<h1>修改一言</h1>\n<div class="content">\n  <p><input class="says-input" type="text"/></p>\n</div>\n<div class="footer">\n  <div class="cancel btn">取消</div>\n  <button class="ok btn">确定</button>\n</div>'})).getDialogDom();l.query(n,".cancel.btn").onclick=function(){t.close()},l.query(n,".ok.btn").onclick=function(){var i=l.query(n,".says-input").value;e.set("usersay",i),h("user"),t.close()}}setTimeout((function(){var n=t.getDialogDom();t.open(),l.query(n,".says-input").value=e.get("usersay")}))}return{key:"user",name:"用户自定义",callback:function(){return new Promise((function(t,n){t({say:e.get("usersay"),title:"点击修改"})}))},click:function(){n()},menu:[{icon:l.getGoogleIcon("e3c9"),title:"修改",click:function(){n()}},{icon:l.getGoogleIcon("e14d"),title:"复制",click:function(){var e=u.say;l.copyText(e)}}]}}()),d((a={load:function(e){var t=0;!function n(){l.xhr("https://tenapi.cn/v2/yiyan?format=json",(function(t){e(JSON.parse(t).data)}),(function(){++t<=5&&n()}))}()},cats:{a:"动画",b:"漫画",c:"游戏",d:"文学",e:"原创",f:"来自网络",g:"其他",h:"影视",i:"诗词",j:"网易云",k:"哲学",l:"抖机灵"}},{key:"hitokoto",name:"随机一言",callback:function(){return new Promise((function(e,t){a.load((function(t){e({say:t.hitokoto,from:t.source,uuid:t.id,cat:t.cat,from_who:t.author,title:"该一言来自"+t.from+"，由"+t.from_who+"上传"})}))}))},click:function(){h("hitokoto")},menu:[{icon:l.getGoogleIcon("e5d5"),title:"刷新",click:function(){h("hitokoto")}},{icon:l.getGoogleIcon("e14d"),title:"复制",click:function(){var e=u.say;l.copyText(e)}},{icon:l.getGoogleIcon("e88e"),title:"一言详情",click:function(){var e=a.cats[u.cat];m({API:"Ten·API（tenapi.cn） | Hitokoto (hitokoto.cn)","内容":u.say,"来源":u.from,"上传者":u.from_who,"分类":e||"未知",UUID:u.uuid})}}]})),d(function(){var t=g("jrsc"),n={},i="jinrishici-token";function o(e,t){var n=new XMLHttpRequest;n.open("get",t),n.withCredentials=!1,n.send(),n.onreadystatechange=function(){if(4===n.readyState){var t=JSON.parse(n.responseText);"success"===t.status&&e(t)}}}return n.load=function(n){var c=t.get(i);return c?o(n,"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2&X-User-Token="+encodeURIComponent(c)):o((function(t){e.set(i,t.token),n(t)}),"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2")},{key:"jinrishici",name:"今日诗词",callback:function(){return new Promise((function(e,t){n.load((function(t){e({say:t.data.content,author:"("+t.data.origin.dynasty+")"+t.data.origin.author,p_title:"《"+t.data.origin.title+"》",tags:t.data.matchTags.join(" "),content:"<br>"+t.data.origin.content.join("<br>"),title:"摘自"+t.data.origin.dynasty+"·"+t.data.origin.author+"的《"+t.data.origin.title+"》"})}))}))},click:function(){h("jinrishici")},menu:[{icon:l.getGoogleIcon("e5d5"),title:"刷新",click:function(){h("jinrishici")}},{icon:l.getGoogleIcon("e14d"),title:"复制",click:function(){var e=u.say;l.copyText(e)}},{icon:l.getGoogleIcon("e88e"),title:"诗词详情",click:function(){m({API:"今日诗词（jinrishici.com）","内容":u.say,"作者":u.author,"标题":u.p_title,"全部内容":u.content})}}]}}()),i.onclick=function(e){e.stopPropagation();var t=i.getBoundingClientRect();o.setOffset({bottom:window.innerHeight-t.top,left:t.left-90+t.width}),o.show()},e.get("saytype")||e.set("saytype","user"),null==e.get("enabled")&&e.set("enabled",!0);var y=new k({title:"一言",index:3}),b=new w({title:"一言类型",type:"select",index:1,message:"页面底部显示的一言类型",init:function(){var e={};for(var t in r)e[t]=r[t].name;return e},callback:function(e){f(e)},get:function(){return e.get("saytype")}}),L=new w({title:"显示一言",type:"boolean",message:"是否页面底部显示的一言",index:0,callback:function(n){e.set("enabled",n),n?(f(e.get("saytype")),t.style.display="",b.show()):(t.style.display="none",b.hide())},get:function(){return e.get("enabled")}});return q.addNewGroup(y),y.addNewItem(b),y.addNewItem(L),e.get("enabled")?f(e.get("saytype")):(t.style.display="none",b.hide()),{getNowSay:function(){return u},setSayType:f,addSayType:function(e){if(l.checkSession(e.session))throw"错误的session";e.key=e.session.id,d(e),b.reInit()}}}(),S=function(){var e=r(),t=e.addEventListener,n=e.removeEventListener,o=e.doevent,c=l.element("div",{class:"bgf"});l.query(document,"body").appendChild(c);var s=g("background",{sync:!0}),a=0;var u=new v({content:`<div class="actionbar">\n      <h1>背景设置</h1><div class="closeBtn">${l.getGoogleIcon("e5cd")}</div>\n    </div>\n    <div class="tab_con"></div>\n    <div class="scroll_con"></div>\n    `,class:"bg_d",mobileShowtype:v.SHOW_TYPE_FULLSCREEN}),f=u.getDialogDom();l.query(f,".closeBtn").onclick=function(){u.close()};var h=l.query(f,"div.tab_con"),p=l.query(f,"div.scroll_con");s.get("bg")||s.set("bg",{type:"default",data:{type:"color",light:"#fff",dark:"#333"}});var y=function(){var e,t,n,i,o=g("bg-def-user");o.get("color")||o.set("color",{dark:"#333333",light:"#ffffff"});var c={getImg:function(e){var t="";t=window.innerWidth<=500?"https://img.loliapi.cn/i/pe/img"+(parseInt(3095*Math.random())+1)+".webp":"https://img.loliapi.cn/i/pc/img"+(parseInt(696*Math.random())+1)+".webp",l.loadimg(t,(function(n){if(n)e({url:t,candownload:!0});else{if("siquan001.github.io"==window.location.host)return function(e){l.xhr("https://stear.cn/api/quik.php?m=bg&key=sys81a1g519lsokh0e8&host=siquan001.github.io",(function(t){t=JSON.parse(t),e({url:t.url,candoanload:!0})}),(function(){t="https://loliapi.com/acg/?_="+Date.now(),l.loadimg(t,(function(){e({url:t,candoanload:!1})}))}))};t="https://loliapi.com/acg/?_="+Date.now(),l.loadimg(t,(function(){e({url:t,candoanload:!1})}))}}))}},s={getImg:function(e){var t="https://img.gumengya.com/api/fj/"+(parseInt(4e3*Math.random())+1)+".jpg";l.loadimg(t,(function(n){n?e({url:t,candownload:!0}):(t="https://api.gumengya.com/Api/FjImg?format=image&_="+Date.now(),l.loadimg(t,(function(){e({url:t,candoanload:!1})})))}))}},a=[{thumbnail:"https://image.gumengya.com/thumbnails/06470348c93db185e44f8acd87c5b683.png",img:"https://image.gumengya.cn/i/2023/10/13/65294cf55ef7d.png"},{thumbnail:"https://image.gumengya.com/thumbnails/5e6200d4552394e722967ef96addd06a.png",img:"https://image.gumengya.cn/i/2023/10/13/65294c34841b4.jpg"},{thumbnail:"https://image.gumengya.com/thumbnails/7ee6991ee0f43be59c28d183597e0cca.png",img:"https://image.gumengya.cn/i/2023/10/13/65294c30563b7.jpg"},{thumbnail:"https://image.gumengya.com/thumbnails/ff674343879116e22e3cf713358f2cb5.png",img:"https://image.gumengya.com/thumbnails/ff674343879116e22e3cf713358f2cb5.png"},{thumbnail:"https://image.gumengya.com/thumbnails/c9c187157ca050044a6589f230e8ddbf.png",img:"https://image.gumengya.cn/i/2023/10/13/65294c2d8aae1.png"}];function r(){return!!o.get("upload")}var u=new d.icon({content:l.getGoogleIcon("e86a"),offset:"br"});u.hide();var h=new d.icon({content:l.getGoogleIcon("f090"),offset:"br"});function p(){var e=new Date;return{light:`rgb(${256-e.getHours()},${256-e.getMinutes()},${256-e.getSeconds()})`,dark:`rgb(${e.getHours()},${e.getMinutes()},${e.getSeconds()})`}}h.hide(),h.getIcon().onclick=function(){window.open(document.querySelector(".bgf img").src)},u.getIcon().onclick=function(){refreshFn.call(this)};var m=null,y={img:function(e,t){l.query(e,".img-sp")||(e.innerHTML='<div class="img-sp full"><div class="cover"></div><img src=""/></div>'),l.query(e,".img-sp img").src=t.url,document.body.classList.add("t-dark")},video:function(e,t){l.query(e,".video-sp")||(e.innerHTML='<div class="video-sp full"><div class="cover"></div><video src="" muted loop></video></div>'),l.query(e,".video-sp video").src=t.url,l.query(e,".video-sp video").oncanplay=function(){this.play()},document.body.classList.add("t-dark")},color:function(e,t){if(l.query(e,".color-sp")||(e.innerHTML='<div class="color-sp full"></div>'),!l.query(document.head,"style.colorSpControl")){var n=document.createElement("style");n.className="colorSpControl",document.head.appendChild(n)}l.query(document.head,"style.colorSpControl").innerHTML=`.color-sp{\n        background-color:${t.light};\n      }body.dark .color-sp{\n        background-color:${t.dark};\n      }`},api:function(e,t){"acg"==t.api?(u.show(),u.getIcon().classList.add("round-anim"),c.getImg((function(t){u.getIcon().classList.remove("round-anim"),y.img(e,{url:t.url}),t.candownload&&h.show()})),refreshFn=function(){u.getIcon().classList.add("round-anim"),c.getImg((function(t){u.getIcon().classList.remove("round-anim"),y.img(e,{url:t.url}),t.candownload&&h.show()}))}):"fj"==t.api?(u.show(),u.getIcon().classList.add("round-anim"),s.getImg((function(t){u.getIcon().classList.remove("round-anim"),y.img(e,{url:t.url}),t.candownload&&h.show()})),refreshFn=function(){u.getIcon().classList.add("round-anim"),s.getImg((function(t){u.getIcon().classList.remove("round-anim"),y.img(e,{url:t.url}),t.candownload&&h.show()}))}):"bing"==t.api?(y.img(e,{url:"https://bing.shangzhenyang.com/api/1080p"}),h.show()):"time"==t.api&&(m=setInterval((function(){y.color(e,p())}),200))},userbg:function(e,t){var n=o.get("userbg");if(n)if(document.body.classList.add("t-dark"),"video"==n.type)n.useidb?o.get("upload",!0,(function(t){y.video(e,{url:URL.createObjectURL(t)})})):y.video(e,{url:n.url});else if("image"==n.type){n.useidb?o.get("upload",!0,(function(t){y.img(e,{url:URL.createObjectURL(t)})})):y.img(e,{url:n.url})}},zdy:function(e,t){if(l.query(e,".zdy-sp")||(e.innerHTML='<div class="zdy-sp full"></div>'),!l.query(document.head,"style.zdySpControl")){var n=document.createElement("style");n.className="zdySpControl",document.head.appendChild(n)}l.query(document.head,"style.zdySpControl").innerHTML=`.zdy-sp{\n        background:${t.light};\n      }body.dark .zdy-sp{\n        background:${t.dark};\n      }`}},b=new v({content:'\n    <form>\n      <h1>上传背景</h1>\n      <div class="content">\n        <p>背景类型：<input type="radio" class="uploadi" name="uploadiov" checked/> 图片 \n        <input type="radio" class="uploadv" name="uploadiov"/> 视频 </p>\n        <p>背景URL：<input type="url" placeholder="URL"/></p>\n        <p>从本地选择文件：<input type="file"/></p>\n        <p class="tip">URL和文件只需填写一个即可，优先选择本地文件</p>\n      </div>\n      <div class="footer">\n        <div class="cancel btn">取消</div>\n        <button class="ok btn">确定</button>\n      </div>\n    </form>\n  ',class:"iovuploader"}),k=b.getDialogDom();function w(e){var t=o.get("userbg");if(t){if("video"==t.type)if(t.useidb)o.get("upload",!0,(function(t){q(URL.createObjectURL(t),(function(t){e(t)}))}));else try{q(t.url,(function(t){e(t)}))}catch(t){e(!1)}else if("image"==t.type){t.useidb?o.get("upload",!0,(function(t){e(URL.createObjectURL(t))})):e(t.url)}}else e(!1)}function q(e,t){var n=document.createElement("video");n.src=e,n.crossOrigin="anonymous",n.onloadedmetadata=function(){var e=document.createElement("canvas"),i=e.getContext("2d");e.width=n.videoWidth,e.height=n.videoHeight,n.currentTime=n.duration/4,n.oncanplay=function(){i.drawImage(n,0,0,e.width,e.height),t(e.toDataURL("image/png")),this.remove()}}}l.query(k,".cancel").onclick=function(e){e.preventDefault(),b.close()},l.query(k,"form").onsubmit=function(n){n.preventDefault();var i=l.query(k,".uploadi").checked?"image":"video",c=l.query(k,'input[type="url"]').value,s=l.query(k,'input[type="file"]').files[0];l.query(f,".zdy .left img").src="",s?(o.set("upload",s,!0,(function(){b.close(),w((function(e){l.query(f,".zdy .left img").src=e})),t({type:"default",data:{type:"userbg"}})})),o.set("userbg",{type:i,useidb:!0})):(o.set("userbg",{type:i,url:c}),b.close(),w((function(n){l.query(e,".zdy .left img").src=n,t({type:"default",data:{type:"userbg"}})}))),l.query(e,".noBg").style.display="none",l.query(e,".hasBg").style.display="block",l.query(e,".zdy .editbtn").style.display="block"};var L=new v({content:'\n    <form>\n      <h1>自定义背景颜色</h1>\n      <div class="content">\n        <p>浅色模式：<input type="color" class="lightbgcolor"/></p>\n        <p>深色模式：<input type="color" class="darkbgcolor"/></p>\n      </div>\n      <div class="footer">\n        <div class="cancel btn">取消</div>\n        <button class="ok btn">确定</button>\n      </div>\n    </form>\n    '}),x=L.getDialogDom();function T(t){l.query(e,".bgitem",!0).forEach((function(e){e.classList.remove("selected")})),l.query(n,".bgitem",!0).forEach((function(e){e.classList.remove("selected")})),"default"==t.type&&("img"==t.data.type?l.query(e,'.neizhi .bgitem[data-img="'+t.data.url+'"]').classList.add("selected"):"userbg"==t.data.type?l.query(e,".zdy .bgitem").classList.add("selected"):"api"==t.data.type?"time"==t.data.api?l.query(n,".api .bgitem").classList.add("selected"):l.query(e,'.api .bgitem[data-api="'+t.data.api+'"]').classList.add("selected"):"color"==t.data.type&&l.query(n,".zdy .bgitem").classList.add("selected"))}function _(){document.body.classList.remove("t-dark"),u.hide(),refreshFn=function(){},clearInterval(m),h.hide()}return l.query(x,".cancel").onclick=function(e){e.preventDefault(),L.close()},l.query(x,"form").onsubmit=function(e){e.preventDefault();var i=l.query(x,".lightbgcolor").value,c=l.query(x,".darkbgcolor").value;o.set("color",{light:i,dark:c}),l.query(n,".zdy .color-left").style.backgroundColor=i,l.query(n,".zdy .color-right").style.backgroundColor=c,L.close(),t({type:"default",data:{type:"color",light:i,dark:c}})},setTimeout((function(){T(quik.background.getbg()),quik.background.addEventListener("change",T)})),{type:"default",init:function(c){t=c.setbg,e=c.pushBgTab({tab:"图片/视频",content:'<div class="unit-item zdy">\n  <div class="unit-title">自定义</div>\n  <div class="unit-content">\n    <div class="bgitem full">\n      <div class="left">\n        <div class="hasBg">\n          <img src="" alt="">\n        </div>\n        <div class="noBg">\n          <span class="material-symbols-outlined">&#xf09b;</span>\n        </div>\n      </div>\n      <div class="right">\n        <div class="bg-title">用户自定义背景</div>\n        <div class="bg-message">上传任意你喜欢的图片/视频作背景</div>\n      </div>\n      <div class="editbtn">\n        <div class="btn ok">重新上传</div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="unit-item neizhi">\n  <div class="unit-title">内置</div>\n  <div class="unit-content"></div>\n</div>\n<div class="unit-item api">\n  <div class="unit-title">API</div>\n  <div class="unit-content">\n    <div class="bgitem half" data-api="bing">\n      <div class="left">\n        <img src="https://bing.shangzhenyang.com/api/1080p" alt="">\n      </div>\n      <div class="right">\n        <div class="bg-title">必应壁纸</div>\n        <div class="bg-message">获取必应首页的壁纸作为背景</div>\n      </div>\n    </div>\n    <div class="bgitem half" data-api="acg">\n      <div class="left">\n        <img src="https://www.loliapi.com/acg/" alt="">\n      </div>\n      <div class="right">\n        <div class="bg-title">随机二次元壁纸</div>\n        <div class="bg-message">获取随机二次元壁纸作为背景，背景提供：loliapi.com</div>\n      </div>\n    </div>\n    <div class="bgitem half" data-api="fj">\n      <div class="left">\n        <img src="https://api.gumengya.com/Api/FjImg?format=image" alt="">\n      </div>\n      <div class="right">\n        <div class="bg-title">随机风景壁纸</div>\n        <div class="bg-message">获取随机风景壁纸作为背景，背景提供：imgapi.cn</div>\n      </div>\n    </div>\n  </div>\n</div>'}),r()?(l.query(e,".noBg").style.display="none",w((function(t){l.query(e,".zdy .left img").src=t}))):(l.query(e,".hasBg").style.display="none",l.query(e,".zdy .editbtn").style.display="none"),l.query(e,".zdy .left").addEventListener("click",(function(){r()?c.setbg({type:c.type,data:{type:"userbg"}}):b.open()})),l.query(e,".zdy .editbtn").addEventListener("click",(function(){b.open()}));var s=l.query(e,".neizhi .unit-content");a.forEach((function(e){var t=l.element("div",{class:"bgitem def","data-img":e.img});t.innerHTML='<div class="left"><img src="'+e.thumbnail+'"/></div>',s.appendChild(t),l.query(t,".left").onclick=function(){c.setbg({type:c.type,data:{type:"img",url:t.getAttribute("data-img")}})}})),l.query(e,".api.unit-item .left",!0).forEach((function(e){e.addEventListener("click",(function(){c.setbg({type:c.type,data:{type:"api",api:e.parentElement.getAttribute("data-api")}})}))})),n=c.pushBgTab({tab:"纯色",content:'<div class="unit-item zdy">\n  <div class="unit-title">自定义颜色</div>\n  <div class="unit-content">\n    <div class="bgitem full">\n      <div class="left">\n        <div class="color-left color"></div>\n        <div class="color-right color"></div>\n      </div>\n      <div class="right">\n        <div class="bg-title">自定义纯色背景</div>\n        <div class="bg-message">将你喜欢的颜色做背景，分亮色和暗色（你也可以都设一个颜色或反着来，但不建议这么做）</div>\n      </div>\n      <div class="editbtn">\n        <div class="btn ok">编辑</div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="unit-item api">\n  <div class="unit-title">API</div>\n  <div class="unit-content">\n    <div class="bgitem full" data-api="time">\n      <div class="left">\n        <div class="color-left color"></div>\n        <div class="color-right color"></div>\n      </div>\n      <div class="right">\n        <div class="bg-title">时间的颜色</div>\n        <div class="bg-message">如果当前时间为12:34:56，那么时间的颜色就是rgb(12,34,56)，在亮色模式下就是rgb(255-12,255-34,255-56)</div>\n      </div>\n    </div>\n  </div>\n</div>'});var u=o.get("color");l.query(n,".zdy .color-left").style.backgroundColor=u.light,l.query(n,".zdy .color-right").style.backgroundColor=u.dark,l.query(n,".zdy .left").onclick=function(){var e=o.get("color");c.setbg({type:c.type,data:{type:"color",light:e.light,dark:e.dark}})},l.query(n,".zdy .btn").onclick=function(){var e=o.get("color");l.query(x,".lightbgcolor").value=e.light,l.query(x,".darkbgcolor").value=e.dark,L.open()};var d=p();l.query(n,".api .color-left").style.backgroundColor=d.light,l.query(n,".api .color-right").style.backgroundColor=d.dark,l.query(n,".api .left").onclick=function(){c.setbg({type:c.type,data:{type:"api",api:this.parentElement.getAttribute("data-api")}})},i=c.pushBgTab({tab:"自定义",content:'<p>浅色模式：</p><br>\n<textarea class="gjzdytlight textarea"></textarea>\n<p>深色模式：</p><br>\n<textarea class="gjzdytdark textarea"></textarea>\n<button class="gjzdysetbtn">设置</button>\n<p class="tip">参见 CSS | background属性</p>'});var g=o.get("custombglight"),f=o.get("custombgdark");l.query(i,".gjzdytlight").value=g||"",l.query(i,".gjzdytdark").value=f||"",l.query(i,".gjzdysetbtn").onclick=function(){o.set("custombglight",l.query(i,".gjzdytlight").value),o.set("custombgdark",l.query(i,".gjzdytdark").value),c.setbg({type:c.type,data:{type:"zdy",dark:l.query(i,".gjzdytdark").value,light:l.query(i,".gjzdytlight").value}}),quik.toast.show("设置成功")}},cancel:function(e){e.bgf.innerHTML="",_()},draw:function(e){var t=e.bgf,n=e.data;_(),y[n.type](t,n)}}}(),b=[y];function L(e){var t=e.tab,n=l.element("div",{class:"tabitem","data-tab":a.toString()});h.appendChild(n),n.innerHTML=t,n.onclick=function(){x(this.getAttribute("data-tab"))};var i=l.element("div",{class:"scrollitem","data-tab":a.toString()});return p.appendChild(i),i.innerHTML=e.content,a++,i}function x(e){l.query(f,".tabitem",!0).forEach((function(e){e.classList.remove("active")})),l.query(f,".scrollitem",!0).forEach((function(e){e.style.display=""})),l.query(f,'.tabitem[data-tab="'+e+'"]').classList.add("active"),l.query(f,'.scrollitem[data-tab="'+e+'"]').style.display="block"}function T(e){e.init({bgf:c,pushBgTab:L,setbg:E,type:e.type})}T(y);var _=null;var I=null;function S(e){for(var t=0;t<b.length;t++)if(e.type==b[t].type)return I&&I.type!=b[t].type&&(I.cancel({bgf:c}),I=b[t]),void b[t].draw({bgf:c,data:e.data});_=e}function E(e){s.set("bg",e),S(e),o("change",[e])}S(s.get("bg"));var D=new k({title:"背景",index:3}),M=new w({title:"背景设置",message:"点击设置背景",index:0,type:"null",callback:function(){u.open()}});return q.addNewGroup(D),D.addNewItem(M),x("0"),m.pushMenu({icon:l.getGoogleIcon("e1bc"),title:"背景设置",click:function(){u.open()}},m.MAIN_MENU_TOP),{pushBgDrawer:function(e){var t=e.session;try{if(!l.checkSession(t))throw"session error"}catch(e){throw new Error("背景Drawer注册失败，Session校验错误。")}var n="bgdrawer-"+l.getRandomHashCache();return e.id=n,b.push(e),T(e),function(e){_&&e.type==_.type&&b[i].draw({bgf:c,data:_.data})}(e),n},getbg:function(){return s.get("bg")},setbg:E,addEventListener:t,removeEventListener:n}}(),E=(function(){var e=new v({content:`<div class="actionbar">\n    <h1>自定义搜索引擎</h1><div class="closeBtn">${l.getGoogleIcon("e5cd")}</div>\n  </div>\n  <div class="searchlist"></div>\n  <div class="footer">\n    <button class="cancel btn">取消</button>\n    <button class="ok btn">确定</button>\n  </div>`,mobileShowtype:v.SHOW_TYPE_FULLSCREEN,class:"search_editor"}),t=e.getDialogDom();l.query(t,".closeBtn").onclick=l.query(t,".cancel.btn").onclick=function(){e.close()},l.query(t,".ok.btn").onclick=l.query(t,".cancel.btn").onclick=function(){var i={};l.query(t,".searchlist .item",!0).forEach((function(e){i[e.dataset.k]=e.querySelector(".url input").value})),(n=i)[x.getSearchTypeIndex()]||x.setSearchType("bing"),x.setSearchList(n),e.close(),u.show("设置成功")};var n=x.getSearchTypeList(),i="";for(var o in n)i+=`<div class="item" data-k="${o}">\n      <div class="icon"><img src="${l.getFavicon(n[o])}" onerror="this.src=quik.util.getFavicon(this.src,true)"/></div>\n      <div class="url"><input value="${n[o]}"/></div>\n      <div class="remove">${l.getGoogleIcon("e5cd")}</div>\n    </div>`;function c(e){l.query(e,".url input").oninput=function(){if("bing"==this.parentElement.parentElement.dataset.k)return this.value=n.bing,void u.show("该项只读");try{this.parentElement.parentElement.querySelector(".icon img").src=l.getFavicon(this.value)}catch(e){}},l.query(e,".remove").onclick=function(){if("bing"==this.parentElement.dataset.k)return this.value=n.bing,void u.show("该项不可删除");this.parentElement.remove()}}i+=`<div class="addnewitem">${l.getGoogleIcon("e145")} 添加新的搜索引擎</div>`,l.query(t,".searchlist").innerHTML=i,l.query(t,".searchlist .item",!0).forEach((function(e){c(e)})),l.query(t,".searchlist .addnewitem").onclick=function(){var e=l.element("div",{class:"item","data-k":"user_"+Date.now().toString().slice(3)});e.innerHTML=`<div class="icon"><img src="https://cn.bing.com/favicon.ico" onerror="this.src=quik.util.getFavicon(this.src,true)"/></div>\n    <div class="url"><input value="https://cn.bing.com/search?q=%keyword%"/></div>\n    <div class="remove">${l.getGoogleIcon("e5cd")}</div>`,l.query(t,".searchlist").insertBefore(e,l.query(t,".searchlist .addnewitem")),c(e)};var s=new w({title:"自定义搜索引擎",index:2,type:"null",message:"",callback:function(t){e.open()}});x.sg.addNewItem(s)}(),function(){var e=document.querySelector(".notice-con"),t=document.querySelector(".no-notice-tip"),n='<div class="notice-actionbar">\n  <div class="notice-title"></div>\n  <div class="notice-close-btn">{{close-btn}}</div>\n</div>\n<div class="notice-content"></div>\n<div class="notice-progress">\n  <div class="p"><div></div></div>\n</div>\n<div class="notice-btns"></div>',i=document.querySelector(".focus-notice");function o(t){var i;this.el=l.element("div",{class:"notice-item"}),e.appendChild(this.el),this.title=t.title,this.content=t.content,this.btns=t.btns||[],this.useprogress=t.useprogress,this.progress=0,(i=this).el.innerHTML=n.replace("{{close-btn}}",l.getGoogleIcon("e5cd")),l.query(i.el,".notice-close-btn").onclick=function(){i.hide()},r(i),u(i),g(i),f(i)}o.prototype={show:function(e){t.classList.remove("show"),h.getIcon().classList.add("notice-hasnew-icon"),clearTimeout(this._timeouthide),this.el.classList.add("show"),this.el.addEventListener("click",(function(e){e.stopPropagation()}));var n=this;this.el.style.display="block",this.el.style.animation="noticein .3s",e&&setTimeout((function(){n.hide()}),e)},hide:function(){this.el.classList.remove("show"),document.querySelector(".notice-con .notice-item.show")||(t.classList.add("show"),h.getIcon().classList.remove("notice-hasnew-icon")),this.el.style.animation="noticeout .3s";var e=this;this._timeouthide=setTimeout((function(){e.el.style.display="none"}),300)},focus:function(){this.show(),function(e){s.push(e),1==s.length&&a()}(this)},setTitle:function(e){this.title=e,r(this)},setContent:function(e){this.content=e,u(this)},setBtn:function(e){this.btns=e,g(this)},setProgress:function(e){!this.useprogress||e>1||e<0||(this.progress=e,f(this))}};var c,s=[];function a(){var e=s[0],t=e.el.cloneNode(!0);i.appendChild(t),l.query(t,".notice-close-btn").onclick=function(){clearTimeout(c),t.remove(),e.hide(),s.shift(),s.length>0&&a()},g({el:t,btns:e.btns,hide:function(){e.hide(),clearTimeout(c),t.remove()},show:function(){}}),c=setTimeout((function(){t.remove(),s.shift(),s.length>0&&a()}),3e3)}function r(e){l.query(e.el,".notice-title").innerHTML=e.title}function u(e){l.query(e.el,".notice-content").innerHTML=e.content}function g(e){var t=l.query(e.el,".notice-btns");t.innerHTML="";for(var n=0;n<e.btns.length;n++){var i=e.btns[n],o=l.element("div",{class:"btn"+(i.style?" "+i.style:"")});o.innerText=i.text,o.onclick=function(){i.click(e)},t.appendChild(o)}}function f(e){e.useprogress?l.query(e.el,".notice-progress .p div").style.width=100*e.progress+"%":l.query(e.el,".notice-progress").style.display="none"}var h=new d.icon({content:l.getGoogleIcon("e7f4"),offset:"tl"});function v(){window.innerWidth>600?h.hide():h.show()}return window.addEventListener("resize",v),h.getIcon().addEventListener("click",(function(){document.querySelector(".notice-sc").classList.add("show")})),document.querySelector(".notice-sc").addEventListener("click",(function(){this.classList.remove("show")})),v(),o}()),D=function(){var e=r(),t=e.addEventListener,n=e.removeEventListener,i=e.doevent,o=g("theme",{sync:!0}),c=null;o.get("theme")||o.set("theme","a");var s=new w({index:0,title:"主题颜色",type:"select",message:"",get:function(){return o.get("theme")},callback:function(e){o.set("theme",e),l(e)},init:function(){return{a:"浅色",b:"深色",c:"跟随时间",d:"跟随系统"}}});L.addNewItem(s);var a=3;function l(e){var t;3!=a&&(a=!1),"b"==e?(document.body.classList.add("dark"),i("change",["dark"]),c="dark"):"a"==e?(document.body.classList.remove("dark"),i("change",["light"]),c="light"):"c"==e?(new Date).getHours()>=18||(new Date).getHours()<6?(document.body.classList.add("dark"),i("change",["dark"]),c="dark"):(document.body.classList.remove("dark"),i("change",["light"]),c="light"):"d"==e&&(window.matchMedia?3==a?(a=!0,(t=window.matchMedia("(prefers-color-scheme: dark)")).matches?document.body.classList.add("dark"):document.body.classList.remove("dark"),t.addEventListener("change",(e=>{e.matches?(document.body.classList.add("dark"),i("change",["dark"]),c="dark"):(document.body.classList.remove("dark"),i("change",["light"]),c="light")}))):a=!0:u("你的浏览器不支持此功能"))}return l(o.get("theme")),{setTheme:function(e){o.set("theme",e),l(e)},addEventListener:t,removeEventListener:n,getTheme:function(){return c}}}(),M=function(){var e={initdone:[]},t=!1,n=new v({content:'<div class="actionbar">\n  <h1>插件管理</h1><div class="closeBtn">{{close-btn}}</div>\n</div>\n<ul class="addon-root">\n  \n</ul>'.replace("{{close-btn}}",l.getGoogleIcon("e5cd")),mobileShowtype:v.SHOW_TYPE_FULLSCREEN,class:"addon-dialog"}),i=n.getDialogDom();l.query(i,".closeBtn").addEventListener("click",(()=>{n.close()})),new d.icon({offset:"tr",content:l.getGoogleIcon("e87b",{type:"fill"})}).getIcon().onclick=function(){n.open()};var o=g("addon",{sync:!0});o.get("list")||o.set("list",{});var c,s=g("addon_script");function a(e){return new Promise((function(t,n){s.get(e,!0,(function(i){i||n();var o=document.createElement("script");o.innerHTML=`!function(){\n          quik.addonPush=function(fn){\n            function Session(id){\n              this.id=id;\n              this.session_token="Hvm_session_token_eoi1j2j";\n              this.isSession=true;\n            }\n            fn({\n              session:new Session("${e}"),\n            })\n          };\n          ${i};\n        }()`,document.body.appendChild(o),setTimeout((function(){t()}))}))}))}function r(){return o.get("list")}function f(e){var t=r(),n=0,i=Object.keys(t).length;for(var o in 0==i&&e(),t)s.get(o)?(n++,c()):l.xhr(t[o].url,(function(e){s.set(o,e,!0,(function(){a(o),n++,c()}))}),(function(){n++}));function c(){n==i&&e()}}return c=[],s.list().forEach((function(e){c.push(a(e))})),Promise.all(c).finally((function(){var n;t=!0,n=[],e.initdone.forEach((function(e){e.apply(null,n)}))})),localStorage._wsync&&(u.show("正在同步插件中，请不要刷新页面"),f((function(){u.show("同步完成"),localStorage.removeItem("_wsync")}))),{installAddon:function(e,t){if(e&&"string"==typeof e){var n=o.get("list");for(var i in n)if(n[i].url==e)return void t({code:1,msg:"该插件已经安装"});l.xhr(e,(function(n){try{var i=JSON.parse(n)}catch(e){return void t({code:-3,msg:"安装失败，无效的manifest"})}if(i.url){var c=function(){function e(){this.id="ext_"+l.getRandomHashCache(),this.session_token="Hvm_session_token_eoi1j2j",this.isSession=!0}return new e}();!function(e,t,n,i){l.xhr(t.url,(function(c){var r=o.get("list");r[n.id]={url:e,manifest:t},o.set("list",r),s.set(n.id,c,!0,(function(){i(0),a(n.id)}))}),(function(){i(-1)}))}(e,i,c,(function(e){0==e?t({code:0,msg:"安装成功"}):-1==e&&t({code:e,msg:"安装失败，脚本请求失败"})}))}else t({code:-2,msg:"安装失败，manifest中没有url字段"})}),(function(){t({code:-4,msg:"安装失败，manifest请求失败"})}))}},uninstallAddon:function(e,t){if(o.get("list")[e]){var n=o.get("list");delete n[e],o.set("list",n),s.remove(e,!0,(function(){t({code:0,msg:"卸载成功"})}))}else t({code:-1,msg:"卸载失败，未找到该插件"})},getAddonList:r,addEventListener:function(t,n){e[t]?e[t].push(n):e[t]=[n]},isinitdone:function(){return t},syncAddon:f}}();let{alert:H,confirm:C,prompt:A}={alert:function(e,t){var n=new v({content:'<div class="def_dialog">\n      <h1>提示</h1>\n      <div class="content"></div>\n      <div class="footer">\n        <button class="ok btn">确定</button>\n      </div>\n    </div>'});setTimeout((function(){n.open()}),10);var i=n.getDialogDom();l.query(i,".content").innerText=e,l.query(i,".ok").onclick=function(){t(),n.close(),setTimeout((function(){n.destory()}),299)}},confirm:function(e,t){var n=new v({content:'<div class="def_dialog">\n      <h1>提示</h1>\n      <div class="content"></div>\n      <div class="footer">\n        <button class="cancel btn">取消</button>\n        <button class="ok btn">确定</button>\n      </div>\n    </div>'});setTimeout((function(){n.open()}),10);var i=n.getDialogDom();l.query(i,".content").innerText=e,l.query(i,".ok").onclick=function(){t(!0),n.close(),setTimeout((function(){n.destory()}),299)},l.query(i,".cancel").onclick=function(){t(!1),n.close(),setTimeout((function(){n.destory()}),299)}},prompt:function(e,t){var n=new v({content:'<div class="def_dialog">\n      <h1>提示</h1>\n      <div class="content">\n        <p class="c"></p>\n        <p><input type="text"/></p>\n      </div>\n      <div class="footer">\n        <button class="cancel btn">取消</button>\n        <button class="ok btn">确定</button>\n      </div>\n    </div>'});setTimeout((function(){n.open()}),10);var i=n.getDialogDom();l.query(i,".content .c").innerText=e,l.query(i,".ok").onclick=function(){t(l.query(i,".content input").value),n.close(),setTimeout((function(){n.destory()}),299)},l.query(i,".cancel").onclick=function(){t(""),n.close(),setTimeout((function(){n.destory()}),299)}}};var G=function(){var e=l.query(document,".cards"),t=function(t){this.width=t.width,this.height=t.height,this.offset=t.offset;var n=l.element("div",{class:"card"});n.innerHTML=t.content,n.style.width=t.width+"px",n.style.height=t.height+"px",t.class&&n.classList.add(t.class),t.offset&&("number"==typeof t.offset.top?n.style.top=t.offset.top+"px":"number"==typeof t.offset.bottom&&(n.style.bottom=t.offset.bottom+"px"),"number"==typeof t.offset.left?n.style.left=t.offset.left+"px":"number"==typeof t.offset.right&&(n.style.right=t.offset.right+"px")),this.el=n,e.appendChild(n)};return t.prototype={show:function(e){var t=this;this.el.style.display="block",e&&e>0&&(this.el.style.transition="all "+e+"ms",this.el.offsetHeight,setTimeout((function(){t.el.style.transition="none"}),e)),this.el.style.opacity="1"},hide:function(e){var t=this;e&&e>0?(this.el.style.transition="all "+e+"ms",setTimeout((function(){t.el.style.transition="none",t.el.style.display="none"}),e)):this.el.style.display="none",this.el.style.opacity="0"},destory:function(){this.el.remove()},getCardDom:function(){return this.el},getOffset:function(){return this.offset},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e){this.width=e,this.el.style.width=e+"px"},setHeight:function(e){this.el.style.height=e+"px"},setOffset:function(e,t){var n=this;this.offset=e,t&&t>0&&(this.el.style.transition="all "+t+"ms",setTimeout((function(){n.el.style.transition="none"}),t)),this.el.style.top="auto",this.el.style.left="auto",this.el.style.bottom="auto",this.el.style.right="auto","number"==typeof e.top?this.el.style.top=e.top+"px":"number"==typeof e.bottom&&(this.el.style.bottom=e.bottom+"px"),"number"==typeof e.left?this.el.style.left=e.left+"px":"number"==typeof e.right&&(this.el.style.right=e.right+"px")}},t}(),U={getJSON:async function(){var e=f(),t=h(),n={};for(var i in t)if(e[i]&&e[i].sync)for(var o in n[i]={},t[i])if("string"==typeof t[i][o]&&"^"==t[i][o][0]){var c={"^_t":"db","^_k":t[i][o],"^_d":await localforage.getItem(t[i][o])};try{JSON.stringify(c),n[i][o]=c}catch(e){}}else n[i][o]=t[i][o];return n},setJSON:async function(e){var t=h();for(var n in e)for(var i in t[n]||(t[n]={}),t[n])if("db"==e[n][i]["^_t"]&&e[n][i]["^_k"]){if(!quik.storage.checkIDB())throw new Error("Your browser is not support indexedDB,Please update your browser.");await localforage.setItem(e[n][i]["^_k"],e[n][i]["^_d"]),t[n][i]=e[n][i]["^_k"]}else t[n][i]=e[n][i];localStorage.quik2=JSON.stringify(t),localStorage._wsync="1",H("数据导入成功，请重新加载页面",(function(){location.reload()}))}};!function(){var e=new k({title:"关于",index:5});q.addNewGroup(e);var t=new w({type:"null",title:"关于QUIK起始页",index:1,callback:function(){c.open()}}),n=new w({type:"null",title:"更新日志",index:2,callback:function(){r.open()}}),i=new w({type:"null",title:"用户协议和隐私政策",index:3,callback:function(){g.open()}}),o=new w({type:"null",title:"特别鸣谢",index:4,callback:function(){f.open()}});e.addNewItem(t),e.addNewItem(n),e.addNewItem(i),e.addNewItem(o),m.pushMenu({icon:l.getGoogleIcon("e88e"),title:"关于QUIK",click:function(){c.open()}},1);var c=new v({content:'<div class="about-dialog">\n  <div class="close">{{close-btn}}</div>\n  <div class="ab-logo">\n    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 456 128">\n      <circle cx="64" cy="64" r="40" stroke="black" stroke-width="3" fill="transparent" />\n      <line x1="74" y1="74" x2="104" y2="104" style="stroke:rgb(0,0,0);stroke-width:3;"/>\n      <path d="M148 24L148 68Q148 104 180 104Q212 104 212 68L212 24" style="fill:transparent;stroke:rgb(0,0,0);stroke-width:3;"></path>\n      <path d="M276 24L306 24M291 24L291 104M276 104L306 104" style="fill:transparent;stroke:rgb(0,0,0);stroke-width:3;"></path>\n      <path d="M384 24L384 104M424 26L384 68M424 102L384 68" style="fill:transparent;stroke:rgb(0,0,0);stroke-width:3;"></path>\n    </svg>\n  </div>\n  <div class="t ver">当前版本: <span></span></div>\n  <div class="t intro">介绍: QUIK起始页是由前端爱好者<a href="https://siquan001.github.io/?ref=quik" target="_blank">陈思全</a>编写的一个简洁、实用的浏览器主页</div>\n  <div class="t license">版权声明: 本项目以GPL 3.0协议声明，版权归原作者所有。</div>\n  <div class="t thanks">感谢这些项目或可爱的人为QUIK起始页提供的支持: <a href="javascript:;">点击查看</a></div>\n  <div class="t feedback">反馈: chensiquan2023@qq.com</div>\n</div>\n'.replace("{{close-btn}}",l.getGoogleIcon("e5cd")),mobileShowtype:v.SHOW_TYPE_FULLSCREEN}),s=c.getDialogDom();l.query(s,".close").onclick=function(){c.close()},setTimeout((function(){l.query(s,".ver span").innerText=window.version.version}));var a={"1.7.8":{updates:[{tag:"change",content:"UI第一次大优化"},{tag:"thanks",content:"感谢 川上星林 提供的反馈"}],time:"2023/9/24"},"1.7.5":{updates:[{tag:"change",content:"优化UI"},{tag:"new",content:"新增显示效果设置"},{tag:"fix",content:"修复若干问题，优化体验"},{tag:"thanks",content:"感谢 edgebook 提供的反馈"}],time:"2023/9/23"},"1.7.2":{updates:[{tag:"fix",content:"修复一言BUG"},{tag:"fix",content:"修复若干问题，优化体验"}],time:"2023/9/22"},"1.7.1":{updates:[{tag:"new",content:"一言添加今日诗词API"}],time:"2023/9/17"},1.7:{updates:[{tag:"change",content:"更新文档"},{tag:"fix",content:"进一步解决背景相关的BUG"},{tag:"change",content:"切换背景API为故梦API"},{tag:"new",content:"API背景支持下载到本地"},{tag:"new",content:"为休息模式的图片和一言和第一界面底部一言添加来源信息，休息模式的图片来源会显示在左上角，一言的来源在鼠标放在一言上时显示"},{tag:"new",content:"天气支持查看不同的城市（仅中国大陆）"},{tag:"fix",content:"修复若干问题，优化体验"}],time:"2023/9/10"},1.6:{updates:[{tag:"fix",content:"修复背景模糊的BUG"},{tag:"change",content:"底部一言修改方式改为直接点击"},{tag:"new",content:"添加一个彩蛋（我可不会告诉你）"}],time:"2023/9/2"},1.5:{updates:[{tag:"new",content:"添加搜索框内容翻译功能"},{tag:"new",content:"添加搜索框输入=计算"},{tag:"new",content:"天气预报添加空气质量"},{tag:"new",content:"新增问候功能"}],time:"2023/8/29"},"1.3.1":{updates:[{tag:"change",content:"修改QUIK起始页使用的图片相关API"},{tag:"change",content:"修改QUIK起始页使用的热榜相关API"}],time:"2023/8/22"},1.3:{updates:[{tag:"new",content:"添加休息模式(Beta)，Ctrl+Alt+B进入，Ctrl+Q退出，累了就休息一下吧~"},{tag:"change",content:"修改用户协议与隐私政策、新手文档等"}],time:"2023/8/20"},"1.2.1":{updates:[{tag:"fix",content:"修复已知BUG,优化用户体验"}],time:"2023/8/20"},1.2:{updates:[{tag:"new",content:"便笺:支持在第一界面就可以直接添加固定的便签，并在编辑页面添加固定按钮。"},{tag:"new",content:"搜索框:添加一个搜索框仅搜索的设置"},{tag:"new",content:"链接:下方链接可以支持大中小三个样式"},{tag:"new",content:"热点:支持把热点添加到首页"},{tag:"fix",content:"计算器:修复+/-键"}],time:"2023/8/18"},"1.0.1":{updates:[{tag:"fix",content:"修复已知BUG,优化用户体验"}],time:"2023/8/3"},"1.0.0":{updates:[{tag:"new",content:"梦开始的地方~"}],time:"2023/8/1"}},r=new v({content:`<div class="actionbar">\n      <h1>更新日志</h1>\n      <div class="closeBtn">${l.getGoogleIcon("e5cd")}</div>\n    </div>\n    <div class="version_list"></div>`,mobileShowtype:v.SHOW_TYPE_FULLSCREEN,class:"update_dia"}),u=r.getDialogDom();function d(e,t){for(var n="",i={new:"新增",del:"删除",fix:"修复",change:"修改",thanks:"感谢"},o=t.updates,c=0;c<o.length;c++)n+='<div class="update_item"><div class="update_item_tag '+o[c].tag+'"><div>'+i[o[c].tag]+'</div></div><div class="update_item_content">'+o[c].content+"</div></div>";return'<div class="version_item"><div class="version_item_title">'+e+'</div><div class="version_item_update_time">发布时间：'+t.time+'</div><div class="version_update">'+n+"</div></div>"}l.query(u,".closeBtn").onclick=function(){r.close()},l.query(u,".version_list").innerHTML=function(){var e="";for(var t in a)e+=d(t,a[t]);return e}();var g=new v({content:` <div class="close">${l.getGoogleIcon("e5cd")}</div><div class="lic-con"><h1>QUIK起始页用户协议与隐私政策</h1>\n\n<p><b>请务必认真阅读！</b></p>\n\n<h2>一、QUIK起始页简介</h2>\n<p>QUIK起始页（以下简称本产品）是一个由个人开发者（<a href="https://siquan001.github.io/" target="_blank">陈思全</a>）编写的一个开源免费的纯前端项目，以GPL 3.0 license声明，版权归原作者所有</p>\n\n<h2>二、用户使用须知</h2>\n<p>1.使用本产品即代表您同意本条款的所有内容。</p>\n<p>2.本产品中一言的“随机一言”功能由Ten·API提供，如若出现有关一言的“随机一言”的内容相关问题，请联系Ten·API，本产品不负责任</p>\n<p>3.本产品中一言的“今日诗词”功能由jinrishici.com提供，如若出现有关一言的“今日诗词”的内容相关问题，请联系jinrishici.com，本产品不负责任</p>\n<p>4.本产品中的搜索联想功能由百度提供，如若出现有关搜索联想的内容相关问题，请联系百度，本产品不负责任</p>\n<p>5.本产品中背景的“必应壁纸”功能由bing.shangzhenyang.com和必应提供，如若出现有关背景的“必应壁纸”的图片内容相关问题，请联系bing.shangzhenyang.com和必应，本产品不负责任</p>\n<p>6.本产品中背景的“随机二次元壁纸”功能由loliapi.com提供，如若出现有关背景的“随机二次元壁纸”的图片内容相关问题，请联系loliapi.com，本产品不负责任</p>\n<p>7.本产品中背景的“随机风景壁纸”功能由api.gumengya.com提供，如若出现有关背景的“随机风景壁纸”的图片内容相关问题，请联系api.gumengya.com，本产品不负责任</p>\n<p>8.本产品的随机背景API均支持下载壁纸，但这些壁纸仅能用做壁纸，禁止商业化使用</p>\n\n<h2>三、插件使用须知</h2>\n<p>1.本产品提供插件拓展功能，使用本产品的插件拓展功能即代表您知晓并同意本条款的所有内容。</p>\n<p>2.安装官方提供的插件需要您同意插件的用户协议与隐私政策，若与本协议存在出入，以本协议为准</p>\n<p>3.安装来自第三方的不明插件是十分不安全的行为，同时请保证您的设备未被病毒程序感染，<b>否则本产品不能保证您的数据安全和使用安全！</b></p>\n\n<h2>四、隐私政策</h2>\n<p>1.本产品本身属于纯前端项目，不会收集您的任何信息，您的所有数据都会存在本地</p>\n<p>2.如您安装了插件，插件可能会收集您的一些信息，详见插件的用户协议与隐私政策。</p>\n<p>3.本产品中使用的一些API和站点服务提供者可能会收集您的IP地址、Cookie等信息用于数据分析和安全防护等</p></div>`,mobileShowtype:v.SHOW_TYPE_FULLSCREEN,class:"lic-dialog"});l.query(g.getDialogDom(),".close").onclick=function(){g.close()};var f=new v({content:`<div class="close">${l.getGoogleIcon("e5cd")}</div><div class="thank-con"><h1>特别鸣谢</h1>\n\n<h2>感谢以下项目对QUIK的支持</h2>\n<ul>\n  <li><a href="https://github.com/localForage/localForage" target="_blank">localforage</a> - 为indexedDB的管理提供一个方便的类似于localStorage的API</li>\n  <li><a href="https://github.com/siquan001/rem/" target="_blank">REM</a> - 简单的模块化工具（我做的）</li>\n</ul>\n\n<h2>感谢以下服务对QUIK的支持</h2>\n<ul>\n  <li><a href="https://loliapi.com/" target="_blank">loliapi</a> - 双端自适应随机二次元图片API提供</li>\n  <li><a href="https://api.gumengya.com/" target="_blank">故梦API</a> - 随机风景图片API提供</li>\n  <li><a href="https://tenapi.cn/" target="_blank">Ten·API</a> - 随机一言API提供</li>\n  <li><a href="https://bing.com/" target="_blank">必应</a> | <a href="https://bing.shangzhenyang.com/" target="_blank">bing.shangzhenyang.com</a> - 每日必应壁纸API提供</li>\n  <li><a href="https://jinrishici.com/" target="_blank">jinrishici.com</a> - 随机诗词API提供</li>\n  <li><a href="https://baidu.com/" target="_blank">百度</a> - 搜索联想API提供</li>\n  <li><a href="https://github.com/" target="_blank">Github</a> - 静态网站托管服务提供</li>\n</ul>\n\n<h2>感谢以下可爱的人对QUIK的支持</h2>\n<ul>\n  <li><a href="https://stear.cn/wm/" target="_blank">川上星林</a></li>\n</ul>\n\n<p>没有你们，就没有现在的QUIK起始页。</p></div>`,class:"thank-dialog",mobileShowtype:v.SHOW_TYPE_FULLSCREEN});l.query(f.getDialogDom(),".close").onclick=function(){f.close()}}(),function(){window.version_code=6,window.version={version:"2.0.0-dev",version_code:window.version_code,updateTime:"2024/02/18",log:[{tag:"change",content:"UI"}]},"serviceWorker"in navigator&&(navigator.serviceWorker.ready.then((function(e){quik.util.xhr("./version",(function(t){parseInt(t)>version_code&&e.active.postMessage("update")}),(function(){}))})),navigator.serviceWorker.addEventListener("message",(function(e){"updated"==e.data&&quik.confirm("新版本已准备就绪，是否刷新页面",(function(e){e&&(localStorage.setItem("__q__s__","1"),location.reload())}))})));var e=null;function t(e){for(var t="",n={new:"新增",del:"删除",fix:"修复",change:"修改",thanks:"感谢"},i=0;i<e.length;i++)t+='<div class="update_item"><div class="update_item_tag '+e[i].tag+'"><div>'+n[e[i].tag]+'</div></div><div class="update_item_content">'+e[i].content+"</div></div>";return t}localStorage.getItem("__q__s__")&&(e||(e=new v({content:`<h1>版本更新</h1>\n        <div class="version_item">\n          <div class="version_item_title">版本号：${window.version.version}</div>\n          <div class="version_item_update_time">发布时间：${window.version.updateTime}</div>\n          <div class="version_update">${t(window.version.log)}</div>\n        </div>\n        <div class="footer">\n          <div class="btn ok">我知道了</div>\n        </div>`,class:"update_dialog"}),l.query(e.getDialogDom(),".btn.ok").onclick=function(){e.close()}),setTimeout((function(){e.open()})),localStorage.removeItem("__q__s__"))}(),window.quik={sync:U,addon:M,storage:g,omnibox:x,util:l,link:T,dialog:v,toast:u,says:I,menu:p,iconc:d,background:S,mainmenu:m,Setting:b,SettingGroup:k,SettingItem:w,mainSetting:q,notice:E,tyGroup:L,alert:H,confirm:C,prompt:A,theme:D,card:G},document.querySelector("main").style.display=""}();