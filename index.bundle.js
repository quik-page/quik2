!function(){var e,t,n,i,o,s,c,r,a,l,u,d={element:function(e,t={}){var n=document.createElement(e);for(var i in t)n.setAttribute(i,t[i]);return n},query:function(e,t,n){return e["querySelector"+(n?"All":"")](t)},getFavicon:function(e,t){return t||function(e){for(var t=new URL(e).host,n=["google.com","goog.le","chrome.com","youtube.com","youtu.be","facebook.com","fb.com","twitter.com","t.co","reddit.com","instagram.com","pinterest.com","linkedin.com"],i=0;i<n.length;i++)if(t.indexOf(n[i])>-1)return!0;return!1}(e)?"https://api.iowen.cn/favicon/"+new URL(e).host+".png":new URL(e).origin+"/favicon.ico"},fangdou:function(e,t){var n=null;return function(){n&&clearTimeout(n);var i=this;n=setTimeout((function(){e.apply(i,arguments)}),t)}},jsonp:function(e,t,n){var i="a"+Math.random().toString(36).slice(2),o=this.element("script",{src:function(e,t,n){var i=new URL(e);return i.searchParams.set(t,n),i.href}(e,n||"callback",i)});document.body.appendChild(o),window[i]=function(e){t(e),document.body.removeChild(o),delete window[i]}},getRandomHashCache:function(){return Math.random().toString(36).slice(2)+Date.now().toString(36)},copyText:function(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{const t=document.createElement("input");t.value=e,t.style.display="none",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}g.show("复制成功")},getGoogleIcon:function(e){return'<span class="material-symbols-outlined">&#x'+e+";</span>"}},g=(e=d.element("div",{class:"toast"}),t=null,d.query(document,"body").append(e),{show:function(n,i){e.innerHTML=n,e.classList.add("show"),clearTimeout(t),t=setTimeout((function(){e.classList.remove("show")}),i??2e3)}}),f=function(){localStorage.quik2||(localStorage.quik2="{}");var e=!1,t=localforage._getSupportedDrivers([localforage.INDEXEDDB])[0]==localforage.INDEXEDDB,n=[];localforage.ready((function(){setTimeout((function(){e=!0,n.forEach((function(e){e()}))}),200)}));var i=function(t,i){e?localforage.getItem(t).then(i):n.push((function(){localforage.getItem(t).then(i)}))},o=function(t,i){if(e){var o="^"+d.getRandomHashCache();localforage.setItem(o,t).then((function(){i(o)}))}else n.push((function(){var e="^"+d.getRandomHashCache();localforage.setItem(e,t).then((function(){i(e)}))}))},s=function(t,i){e?localforage.removeItem(t).then(i):n.push((function(){localforage.removeItem(t).then(i)}))},c=function(e){if("string"==typeof e){function n(n,o,s){if(!o)return c()[e][n];if(!t)throw new Error("indexedDB is not support in this browser");i(c()[e][n],(function(e){s(e)}))}function c(){return JSON.parse(localStorage.getItem("quik2"))}function r(t){var n=c();n[e]=t,localStorage.setItem("quik2",JSON.stringify(n))}return JSON.parse(localStorage.getItem("quik2"))[e]||r({}),{get:n,set:function(i,a,l,u){if(l){if(!t)throw new Error("indexedDB is not support in this browser");n(i)&&s(n(i)),o(a,(function(t){var n=c();n[e][i]=t,r(n[e]),u(t)}))}else{var d=c();d[e][i]=a,r(d[e])}},remove:function(n,i,o){if(i){if(!t)throw new Error("indexedDB is not support in this browser");s(a[e][n],(function(){var t=c();delete t[e][n],r(t),o()}))}else{var a=c();delete a[e][n],r(a)}}}}throw new Error("ck is not a string")};return c.checkIDB=function(){return t},c}(),p=function(){var e=[],t=function(t){this.options=t;var n=d.element("div",{class:"dialog"});n.innerHTML=`<div class="d-b"></div><div class="d-c">${t.content}</div>`,d.query(document,"main").append(n);var i=d.query(n,".d-c");t.class&&i.classList.add(t.class),1==t.mobileShowtype&&n.classList.add("mobile-show-full"),this.element=n,this.id=d.getRandomHashCache(),n.setAttribute("data-id",this.id),n.querySelector(".d-b").addEventListener("click",(function(){var t,n;window.innerWidth<=650&&(t=this.parentElement.getAttribute("data-id"),n=null,e.forEach((function(e){e.id==t&&(n=e)})),n).close()})),e.push(this)};return t.SHOW_TYPE_FULLSCREEN=1,t.SHOW_TYPE_DIALOG=2,t.iframeDialogBuilder=function(e,n=1){var i=new t({content:`<div class="material-symbols-outlined closebtn">&#xE5CD;</div><iframe src="${e}" class="dialog-iframe"></iframe>`,class:"iframe-dialog",mobileShowtype:n}),o=i.getDialogDom();return d.query(o,".closebtn").onclick=function(){i.close()},this.closed=!0,i},t.prototype={open:function(){this.element.classList.add("show"),this.closed=!1,this.onopen&&this.onopen()},close:function(){this.element.classList.remove("show"),this.closed=!0,this.onclose&&this.onopen()},destory:function(){this.element.remove(),e.splice(e.indexOf(this),1)},getDialogDom:function(){return d.query(this.element,".d-c")}},t}(),h=((n=function(e){this.options=e;var t=d.element("div",{class:"contextMenu"});e.offset&&(t.style.top=e.offset.top+"px",t.style.left=e.offset.left+"px",t.style.bottom=e.offset.bottom+"px",t.style.right=e.offset.right+"px"),e.list.forEach((function(e){var n=d.element("div",{class:"item"});n.innerHTML=`<div class="icon">${e.icon}</div><div class="title">${e.title}</div>`,n.onclick=function(){e.click()},t.appendChild(n)})),document.body.appendChild(t),this.element=t}).prototype={show:function(){this.element.classList.add("show"),this.element.style.height="auto";var e=this.element.getBoundingClientRect().height;this.element.style.height="0px",this.element.style.transition="height .2s";var t=this;setTimeout((function(){t.element.style.height=e+"px"}))},hide:function(){this.element.style.height="0px";var e=this;setTimeout((function(){e.element.style.transition="none",e.element.classList.remove("show")}),200)},isShow:function(){return this.element.classList.contains("show")},destory:function(){this.element.remove()},setOffset:function(e){this.options.offset=e;var t=this.options,n=this.element;t.offset&&(n.style.top=t.offset.top+"px",n.style.left=t.offset.left+"px",n.style.bottom=t.offset.bottom+"px",n.style.right=t.offset.right+"px")},setList:function(e){this.options.list=e;var t=this.options,n=this.element;n.innerHTML="",t.list.forEach((function(e){var t=d.element("div",{class:"item"});t.innerHTML=`<div class="icon">${e.icon}</div><div class="title">${e.title}</div>`,t.onclick=function(){e.click()},n.appendChild(t)}))}},document.addEventListener("click",(function(){document.querySelectorAll(".contextMenu").forEach((function(e){e.style.height="0px",setTimeout((function(){e.style.transition="none",e.classList.remove("show")}),200)}))})),{contextMenu:n}),m=(i={tl:d.query(document,".topper .left"),tr:d.query(document,".topper .right"),bl:d.query(document,".bottomer .left"),br:d.query(document,".bottomer .right")},(o=function(e){this.content=e.content,this.width=e.width;var t=d.element("div",{class:"item"+(e.class?" "+e.class:"")});i[e.offset].append(t),t.innerHTML=this.content,this.element=t,this.width&&(t.style.width=this.width+"px")}).prototype={getIcon:function(){return this.element},setIcon:function(e){this.content=e,this.element.innerHTML=this.content},setWidth:function(e){this.width=e,this.width&&(ic.style.width=this.width+"px")},getWidth:function(){return this.width},show:function(){this.element.style.display="block"},hide:function(){this.element.style.display="none"}},{icon:o}),v=function(){var e=new m.icon({content:d.getGoogleIcon("e8b8"),offset:"bl"}),t=new p({content:`<div class="actionbar">\n      <h1>设置</h1><div class="closeBtn">${d.getGoogleIcon("e5cd")}</div>\n    </div>\n    <ul></ul>`,class:"setting_dia",mobileShowtype:p.SHOW_TYPE_FULLSCREEN}),n=t.getDialogDom();d.query(n,".closeBtn").onclick=function(){t.close()},e.getIcon().onclick=function(){t.open()};var i=d.query(n,"ul"),o=!1;function s(e){var t=e.getAttribute("data-hash"),n=r[t];!function(){var t=n.type;if(t){var i=n.get();if("boolean"==t)e.querySelector(".input").checked=i;else if("string"==t||"number"==t)e.querySelector(".input").value=i;else if("range"==t){var o=n.init();e.querySelector(".input").value=i,e.querySelector(".input").max=o.max,e.querySelector(".input").min=o.min}else if("select"==t){o=n.init();e.querySelector(".input").innerHTML=function(){var e="";for(var t in o)e+=`<option value="${t}">${o[t]}</option>`;return e}(),e.querySelector(".input").value=i}}else e.onclick=function(){n.callback()}}(),e.querySelector(".name").innerHTML=n.title,e.querySelector(".message").innerHTML=n.message,e.querySelector(".input")&&(e.querySelector(".input").onchange=function(){"checkbox"==this.type?!n.check||n.check(this.checked)?n.callback(this.checked):this.checked=n.get():!n.check||n.check(this.value)?n.callback(this.value):this.value=n.get()}),n.show&&(n.show()?e.style.display="block":e.style.display="none")}function c(e){switch(e){case"boolean":return'<div class="right_con_item_checkbox">\n            <input type="checkbox" class="input" />\n          </div>';case"string":return'<div class="right_con_item_input">\n            <input type="text" class="input" />\n          </div>';case"number":return'<div class="right_con_item_number">\n            <input type="number" class="input" />\n          </div>';case"select":return'<div class="right_con_item_select">\n            <select class="input" ></select>\n          </div>';case"range":return'<div class="right_con_item_range">\n            <input type="range" class="input" />\n          </div>';default:return d.getGoogleIcon("e5cc")}}t.onopen=function(){o||function(){var e={};for(var t in r){var n=r[t].unit;e[n]||(e[n]=[]),e[n].push(r[t])}for(var t in e)e[t].sort(((e,t)=>e.index-t.index));var a="";for(var t in e){var l=`<li class="unit"><div class="title">${t}</div><ul>\n        ${function(e){for(var t="",n=0;n<e.length;n++){var i=e[n];t+=`<li class="setting_item" data-hash="${i.hash}">\n              <div class="left-message">\n                <div class="name">${i.title}</div>\n                <div class="message">${i.message}</div>\n              </div>\n              <div class="right_con">\n                ${c(i.type)}\n              </div>\n            </li>`}return t}(e[t])}\n      </ul></li>`;a+=l}i.innerHTML=a,o=!0,d.query(i,"li.setting_item",!0).forEach((function(e){s(e)}))}()};var r={},a=function(e){var t="se_"+d.getRandomHashCache()+Object.keys(r).length;return e.hash=t,r[t]=e,o&&function(e){var t=e.hash,n=d.query(i,"li.unit",!0),o=!1,r=l(e);if(n.forEach((function(e){d.query(e,".title").innerHTML==t&&(o=!0,d.query(e,"ul").append(r))})),!o){var a=d.element("li",{class:"unit"});a.innerHTML=`<div class="title">${e.unit}</div><ul></ul>`,d.query(a,"ul").append(r)}function l(){var t=d.element("li",{class:"setting_item"});return t.setAttribute("data-hash",e.hash),t.innerHTML=`<div class="left-message">\n      <div class="name">${e.title}</div>\n      <div class="message">${e.message}</div>\n    </div>\n    <div class="right_con">\n      ${c(e.type)}\n    </div>`,t}s(li)}(e),t};var l=f("setting");function u(e){"b"==e?document.body.classList.add("dark"):"a"==e?document.body.classList.remove("dark"):"c"==e&&((new Date).getHours()>=18||(new Date).getHours()<6?document.body.classList.add("dark"):document.body.classList.remove("dark"))}return l.get("theme")||l.set("theme","a"),a({index:0,unit:"通用",title:"主题颜色",type:"select",message:"",get:function(){return l.get("theme")},callback:function(e){l.set("theme",e),u(e)},init:function(){return{a:"浅色",b:"深色",c:"自适应"}}}),u(l.get("theme")),{registerSetting:a,updateSettingByHash:function(e,t){if(r[e]){for(var n in t)r[e][n]=t[n];o&&s(d.query(i,'li[data-hash="'+e+'"]'))}},recallSettingByHash:function(e,t){if(r[e]){var n=d.query(i,'li[data-hash="'+e+'"]');if("get"==t){var o=r[e].get(),s=r[e].type;"boolean"==s?n.querySelector(".input").checked=o:"string"!=s&&"number"!=s&&"range"!=s&&"select"!=s||(n.querySelector(".input").value=o)}else"show"==t?r[e].show&&(r[e].show()?n.style.display="block":n.style.display="none"):"callback"==t&&r[e].callback(r[e].get())}}}}(),y=(s={focus:[],blur:[],input:[],beforeenter:[],afterenter:[]},c=function(){var e={SA:[],enter:[]},t=f("omnibox"),n=[],i=function(t){for(var n=0;n<e.enter.length;n++)if(e.enter[n].check(t))return e.enter[n]},o=function(t){e.enter.unshift(t)},s=function(t){e.SA.push(t)},c=function(){if(f){var e=f("search"),t="%keyword%",n={bing:"https://cn.bing.com/search?q="+t,baidu:"https://www.baidu.com/s?wd="+t,so:"https://so.com/s?q="+t,sogou:"https://sogou.com/web?query="+t,google:"https://google.com/search?q="+t};e.get("typelist")||e.set("typelist",n),e.get("type")||e.set("type","bing");var i={},o=function(e,t){i[e]&&i[e].forEach((function(e){e.apply(null,t)}))},s={getSearchType:function(){return e.get("typelist")[e.get("type")]},addEventListener:function(e,t){i[e]?i[e].push(t):i[e]=[t]},setSearchList:function(t){if(0==Object.keys(t).length)throw new Error("newList is empty");e.set("typelist",t);var n=e.get("typelist");o("typelistchange");var i=e.get("type");n[i]!=t[i]&&o("nowtypechange")},getSearchTypeList:function(){return e.get("typelist")},setSearchType:function(t){e.set("type",t),o("nowtypechange")},getSearchTypeIndex:function(){return e.get("type")}};return Object.defineProperty(s,"keywordText",{get:function(){return t}}),s}}();function r(e){return!t.get("justsearch")&&/^(https?:\/\/)?([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&%\$\-]+)*@)?((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.[a-zA-Z]{2,4})(\:[0-9]+)?(\/[^\/][a-zA-Z0-9\.\,\?\'\\\/\+&%\$#\=~_\-@]*)*(\/)?$/.test(e)}o({check:function(){return!0},enter:function(e){open(c.getSearchType().replace(c.keywordText,e))},icon:":searchtype",submit:d.getGoogleIcon("E8B6")}),o({check:r,enter:function(e){-1==e.indexOf("://")&&(e="http://"+e),open(e)},icon:d.getGoogleIcon("E80B"),submit:d.getGoogleIcon("E89E")}),s({check:function(e){return!!e},get:function(e,t){var n=t();return n.unshift({icon:d.getGoogleIcon("E8B6"),text:e,click:function(){open(c.getSearchType().replace(c.keywordText,e))}}),n}});var a=null;return s({check:function(e){return!!e},get:function(e,t){return new Promise((function(n,i){var o=t();a=d.jsonp("https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&wd="+e,(function(e){a=null,e.g||n(o),e.g.forEach((function(e){o.push({icon:d.getGoogleIcon("E8B6"),text:e.q,click:function(){open(c.getSearchType().replace(c.keywordText,e.q))}})})),n(o)}),"cb")}))},interrupt:function(){a&&(a.abort(),a=null)}}),s({check:r,get:function(e,t){return new Promise((function(n,i){var o=t();o.unshift({icon:d.getGoogleIcon("E80B"),text:e,click:function(){-1==e.indexOf("://")&&(e="http://"+e),open(e)}}),n(o)}))}}),v.registerSetting({index:1,unit:"搜索框",title:"搜索框仅搜索",type:"boolean",message:"打开后，搜索框将失去打开链接的功能",get:function(){return!!t.get("justsearch")},callback:function(e){return t.set("justsearch",e),!0}}),{getSA:function(t,i){n.length>0&&n.forEach((function(t){e.SA[t].interrupt()}));for(var o=[],s=e.SA.length,c=0;c<s;c++)if(e.SA[c].check(t)){var r=e.SA[c].get(t,(function(){return o}));r instanceof Promise?(n.push(c),function(e){r.then((function(t){o=t,n.splice(n.indexOf(e),1),i(o)}))}(c)):i(o=r)}},enter:function(e){i(e).enter(e)},getType:i,addNewType:o,addNewSA:s,searchUtil:c,initsto:t}}(),r=function(){"use strict";var e=d.element("div",{class:"searchbox"}),t=d.element("div",{class:"cover searchcover"}),n=d.element("div",{class:"searchpadding"});e.innerHTML='\n  <div class="box">\n    <div class="icon"></div>\n    <div class="input">\n      <input type="text" placeholder="搜索或输入网址"/>\n    </div>\n    <div class="submit"></div>\n    </div>\n  <ul class="sas"></ul>\n  ',d.query(document,"main").append(e),d.query(document,"main").append(t),d.query(document,"main .center").append(n);var i=d.query(e,"div.icon"),o=d.query(e,"div.input input"),r=d.query(e,"div.submit"),a=d.query(e,"ul.sas");function l(e){var t=c.getType(e);":"==t.icon[0]?(i.setAttribute("data-teshu",t.icon),i.innerHTML=function(e){return":searchtype"==e?`<img src=${d.getFavicon(c.searchUtil.getSearchType())} onerror='this.src=quik.util.getFavicon(this.src,true)'>`:""}(t.icon)):(i.innerHTML=t.icon,i.removeAttribute("data-teshu")),":"==t.submit[0]?(r.setAttribute("data-teshu",t.submit),r.innerHTML=(t.submit,"")):(r.innerHTML=t.submit,r.removeAttribute("data-teshu"))}o.oninput=d.fangdou((function(){l(this.value.trim()),a.innerHTML="",c.getSA(this.value.trim(),(function(e){var t=d.query(a,"li.active");t&&(t={icon:d.query(t,"div.saicon").innerHTML,text:d.query(t,"div.sa_text").innerHTML}),a.innerHTML="",e.forEach((function(e){var t=d.element("li");t.innerHTML=`<div class="saicon">${e.icon}</div><div class="sa_text">${e.text}</div>`,a.append(t),t.onclick=e.click})),t&&d.query(a,"li",!0).forEach((function(e){d.query(e,"div.saicon").innerHTML&&d.query(e,"div.sa_text").innerHTML==t.text&&e.classList.add("active")}))})),s.input.forEach((function(e){e(o.value)}))}),300),o.onkeydown=function(e){if("Enter"==e.key)(t=d.query(a,"li.active"))?t.click():c.enter(this.value);else if("ArrowUp"==e.key)e.preventDefault(),(t=d.query(a,"li.active"))&&(t.classList.remove("active"),t.previousElementSibling&&t.previousElementSibling.classList.add("active"));else if("ArrowDown"==e.key){var t;e.preventDefault(),(t=d.query(a,"li.active"))?t.nextElementSibling&&(t.classList.remove("active"),t.nextElementSibling.classList.add("active")):d.query(a,"li").classList.add("active")}},o.addEventListener("focus",(function(){t.classList.add("active"),e.classList.add("active"),s.focus.forEach((function(e){e(o)}))})),o.addEventListener("blur",(function(){setTimeout((function(){t.classList.remove("active"),e.classList.remove("active"),s.blur.forEach((function(e){e(o)}))}),5)})),r.onclick=function(){c.enter(o.value)};var u=d.element("div",{class:"searchtypeselector"});function g(){var e=d.query(u,"ul"),t=c.searchUtil.getSearchTypeIndex();e.innerHTML="";var n=c.searchUtil.getSearchTypeList();for(var i in n){var o=d.element("li");o.innerHTML=`<img src=${d.getFavicon(n[i])} onerror='this.src=quik.util.getFavicon(this.src,true)'>`,o.setAttribute("data-type",i),e.append(o),i==t&&o.classList.add("active"),o.onclick=function(){var e=d.query(u,"ul li.active");e&&e.classList.remove("active"),this.classList.add("active"),c.searchUtil.setSearchType(this.getAttribute("data-type")),u.classList.remove("active")}}u.style.width=36*d.query(e,"li",!0).length+"px"}return u.innerHTML="<ul></ul>",d.query(document,"main .center").append(u),i.addEventListener("click",(function(){u.classList.contains("active")?u.classList.remove("active"):u.classList.add("active")})),c.searchUtil.addEventListener("nowtypechange",(function(){":searchtype"==i.getAttribute("data-teshu")&&l(o.value)})),c.searchUtil.addEventListener("typelistchange",(function(){g()})),g(),l(""),c.initsto.get("autofocus")&&o.focus(),v.registerSetting({index:0,unit:"搜索框",title:"自动聚焦",message:"打开页面自动聚焦搜索框",type:"boolean",get:function(){return!!c.initsto.get("autofocus")},callback:function(e){return c.initsto.set("autofocus",e),!0}}),{setValue:function(e){o.value=e,o.focus()}}}(),{value:r.setValue,addNewSug:c.addNewSA,addEventListener:function(e,t){s[e]&&s[e].push(t)},getSearchType:c.searchUtil.getSearchType,getSearchTypeList:c.searchUtil.getSearchTypeList,getSearchTypeIndex:c.searchUtil.getSearchTypeIndex,setSearchType:c.searchUtil.setSearchType,setSearchList:c.searchUtil.setSearchList,search:{addEventListener:c.searchUtil.addEventListener}}),b=((a=f("link")).get("links")||a.set("links",[]),{addLink:function(e){var t=a.get("links");return t.push(e),a.set("links",t),t.length-1},getLinks:function(){return a.get("links")},changeLink:function(e,t){var n=a.get("links");n[e]=t,a.set("links",n)},deleteLink:function(e){var t=a.get("links");t.splice(e,1),a.set("links",t)},moveLink:function(e,t){var n=a.get("links"),i=n[e];n.splice(e,1),n.splice(t,0,i),a.set("links",n)}}),k=function(){var e,t=d.element("div",{class:"links"});function n(){t.innerHTML='<ul class="linklist"></ul>';var e=d.query(t,"ul");b.getLinks({type:"all"}).forEach((function(t,n){var o=d.element("li",{"data-index":n});o.innerHTML=`<a href="${t.url}" target="_blank" rel="noopener noreferer">\n        <img src="${d.getFavicon(t.url,!0)}" onerror='this.src=quik.util.getFavicon(this.parentElement.href)'/>\n        <p></p>\n      </a><div class="material-symbols-outlined editlinkbtn">&#xe3c9;</div>`,o.querySelector("p").innerText=t.title,e.append(o),d.query(o,".editlinkbtn").onclick=function(){i(this.parentElement.getAttribute("data-index")-0)}}));var n=d.element("li",{class:"link-add"});n.innerHTML='<a href="javascript:void(0)" class="material-symbols-outlined">&#xe145;</a>',e.append(n),d.query(n,"a").onclick=function(){i(-1)}}function i(t){if(!e){var i=(e=new p({class:"link-add-dialog",content:'<form>\n          <h1></h1>\n          <div class="content">\n            <p>URL ：<input class="link-add-url" type="url" required placeholder="链接地址(必填)"/></p>\n            <p>标题：<input class="link-add-title" type="text" required placeholder="链接标题(必填)"/></p>\n            <p>位置：<input class="link-add-index" type="number" min="0" placeholder="链接位置"/></p>\n          </div>\n          <div class="footer">\n            <button class="delete btn">删除</button>\n            <button class="cancel btn">取消</button>\n            <button class="ok btn"></button>\n          </div>\n        </form>'})).getDialogDom();d.query(i,".cancel.btn").onclick=function(t){t.preventDefault(),e.close()}}setTimeout((function(){e.open();var i=e.getDialogDom(),o=b.getLinks();-1==t?(d.query(i,"h1").innerHTML="添加链接",d.query(i,".ok.btn").innerHTML="添加",d.query(i,"input.link-add-url").value="",d.query(i,"input.link-add-title").value="",d.query(i,"input.link-add-index").setAttribute("max",o.length),d.query(i,"input.link-add-index").value=d.query(i,"input.link-add-index").max,d.query(i,".delete.btn").style.display="none",d.query(i,"form").onsubmit=function(t){t.preventDefault();var o=d.query(i,".link-add-url").value,s=d.query(i,".link-add-title").value,c=d.query(i,".link-add-index").value;c=void 0===c?d.query(i,".link-add-index").max-0:c,b.moveLink(b.addLink({url:o,title:s}),c),n(),e.close()}):(d.query(i,"h1").innerHTML="修改链接",d.query(i,".ok.btn").innerHTML="修改",d.query(i,".delete.btn").style.display="",d.query(i,"input.link-add-url").value=o[t].url,d.query(i,"input.link-add-title").value=o[t].title,d.query(i,"input.link-add-index").value=t,d.query(i,"input.link-add-index").setAttribute("max",o.length-1),d.query(i,"form").onsubmit=function(o){o.preventDefault();var s=d.query(i,".link-add-url").value,c=d.query(i,".link-add-title").value,r=d.query(i,".link-add-index").value-0;r=void 0===t?t:r,b.changeLink(t,{url:s,title:c}),t!=r&&b.moveLink(t,r),n(),e.close()},d.query(i,".delete.btn").onclick=function(i){i.preventDefault(),b.deleteLink(t),n(),e.close()})}))}d.query(document,"main .center").append(t),n()}(),L=function(){var e=f("says"),t=function(){var t={},n="jinrishici-token";function i(e,t){var n=new XMLHttpRequest;n.open("get",t),n.withCredentials=!1,n.send(),n.onreadystatechange=function(){if(4===n.readyState){var t=JSON.parse(n.responseText);"success"===t.status&&e(t)}}}return t.load=function(t){var o=e.get(n);return o?i(t,"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2&X-User-Token="+encodeURIComponent(o)):i((function(i){e.set(n,i.token),t(i)}),"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2")},t}(),n=function(){var e={},t=[],n=0,i=30;return e.load=function(e){var o=new URL("https://v1.hitokoto.cn/");t.forEach((function(e){o.searchParams.append("c",e)})),o.searchParams.append("min_length",n),o.searchParams.append("max_length",i),fetch(o.href).then((function(e){return e.json()})).then(e)},e.setTypes=function(e){t=e},e.setMinLength=function(e){n=e},e.setMaxLength=function(e){i=e},e.getAllTypes=function(){return{a:"动画",b:"漫画",c:"游戏",d:"文学",e:"原创",f:"来自网络",g:"其他",h:"影视",i:"诗词",j:"网易云",k:"哲学",l:"抖机灵"}},e}(),i=["user","jinrishici","hitokoto"],o=d.element("div",{class:"says"});d.query(document,"main").appendChild(o);o.innerHTML=`<div class="say-inner"></div><div class="say-control">${d.getGoogleIcon("e5d4")}</div>`;var s=d.query(o,"div.say-inner"),c=d.query(o,"div.say-control"),r=new h.contextMenu({list:[]}),a=new p({content:`<div class="closeBtn">${d.getGoogleIcon("e5cd")}</div><ul></ul>`,class:"says_info"}),l=a.getDialogDom();d.query(l,"div.closeBtn").onclick=function(){a.close()},c.onclick=function(e){e.stopPropagation(),"user"==u?r.setList([{icon:d.getGoogleIcon("e3c9"),title:"修改",click:function(){b()}},{icon:d.getGoogleIcon("e14d"),title:"复制",click:function(){var e=s.innerText;d.copyText(e)}}]):"jinrishici"==u?r.setList([{icon:d.getGoogleIcon("e5d5"),title:"刷新",click:function(){s.click()}},{icon:d.getGoogleIcon("e14d"),title:"复制",click:function(){var e=s.innerText;d.copyText(e)}},{icon:d.getGoogleIcon("e88e"),title:"诗句详情",click:function(){d.query(l,"ul").innerHTML=function(){var e="";for(var t in g)e+="<li><b>"+t+":</b> "+g[t]+"</li>";return e}(),a.open()}}]):"hitokoto"==u&&r.setList([{icon:d.getGoogleIcon("e5d5"),title:"刷新",click:function(){s.click()}},{icon:d.getGoogleIcon("e14d"),title:"复制",click:function(){var e=s.innerText;d.copyText(e)}},{icon:d.getGoogleIcon("e88e"),title:"一言详情",click:function(){d.query(l,"ul").innerHTML=function(){var e="";for(var t in g)e+="<li><b>"+t+":</b> "+g[t]+"</li>";return e}(),a.open()}}]);var t=c.getBoundingClientRect();r.setOffset({bottom:window.innerHeight-t.top,left:t.left-90+t.width}),r.show()},e.get("usersay")||e.set("usersay","海内存知己，天涯若比邻"),e.get("saytype")||e.set("saytype","user");var u=null,g={};function m(i){u=i,"user"==i?(s.innerText=e.get("usersay"),g={}):"jinrishici"==i?(s.innerText="...",t.load((function(e){s.innerHTML=e.data.content,g={API:"jinrishici","内容":e.data.content,"作者":"("+e.data.origin.dynasty+")"+e.data.origin.author,"标题":"《"+e.data.origin.title+"》","标签":e.data.matchTags.join(" "),"全部内容":"<br>"+e.data.origin.content.join("<br>")}}))):"hitokoto"==i&&(s.innerText="...",n.load((function(e){s.innerText=e.hitokoto,g={API:"hitokoto","内容":e.hitokoto,"来自":e.from,"上传者":e.from_who,UUID:e.uuid}})))}s.addEventListener("click",(function(){"user"==u?b():"jinrishici"==u?(s.innerHTML="...",t.load((function(e){s.innerHTML=e.data.content,g={API:"jinrishici","内容":e.data.content,"作者":"("+e.data.origin.dynasty+")"+e.data.origin.author,"标题":"《"+e.data.origin.title+"》","标签":e.data.matchTags.join(" "),"全部内容":"<br>"+e.data.origin.content.join("<br>")}}))):"hitokoto"==u&&(s.innerHTML="...",n.load((function(e){s.innerHTML=e.hitokoto,g={API:"hitokoto","内容":e.hitokoto,"来自":e.from,"上传者":e.from_who,UUID:e.uuid}})))}));var y=null;function b(){if(!y){var t=(y=new p({class:"sayseditordialog",content:'<h1>修改一言</h1>\n<div class="content">\n  <p><input class="says-input" type="text"/></p>\n</div>\n<div class="footer">\n  <button class="cancel btn">取消</button>\n  <button class="ok btn">确定</button>\n</div>'})).getDialogDom();d.query(t,".cancel.btn").onclick=function(){y.close()},d.query(t,".ok.btn").onclick=function(){var n=d.query(t,".says-input").value;e.set("usersay",n),m(u),y.close()}}setTimeout((function(){var t=y.getDialogDom();y.open(),d.query(t,".says-input").value=e.get("usersay")}))}null==e.get("enabled")&&e.set("enabled",!0),e.get("enabled")?m(e.get("saytype")):o.style.display="none",v.registerSetting({unit:"一言",title:"显示一言",message:"在页面下方显示一句话",index:0,type:"boolean",get:function(){return e.get("enabled")},callback:function(t){return e.set("enabled",t),t?(u||m(e.get("saytype")),o.style.display="block"):o.style.display="none",!0}}),v.registerSetting({unit:"一言",title:"一言类型",message:"一言类型设置",index:1,type:"select",get:function(){return e.get("saytype")},init:function(){return{user:"自定义",jinrishici:"今日诗词",hitokoto:"随机一言"}},check:function(e){return-1!=i.indexOf(e)},callback:function(t){return m(t),e.set("saytype",t),!0}})}(),q=function(){var e,t=(e=[{url:"https://api.gumengya.com/Api/DmImg?format=image",message:{from:"故梦API",site:"https://gumengya.com/"}},{url:"https://www.loliapi.com/acg/",message:{from:"LoliApi",site:"https://www.loliapi.com/"}},{url:"https://img.xjh.me/random_img.php?return=302&type=bg",message:{from:"岁月小筑",site:"https://img.xjh.me/"}}],{getImg:function(t){return e["number"==typeof t&&t<e.length?t:parseInt(Math.random()*e.length)]}}),n=function(){var e=[{url:"https://api.gumengya.com/Api/FjImg?format=image",message:{from:"故梦API",site:"https://gumengya.com/"}},{url:"https://imgapi.cn/api.php?fl=fengjing",message:{from:"IMGAPI",site:"https://imgapi.cn/"}},{url:"https://img.xjh.me/random_img.php?return=302&type=bg&ctype=nature",message:{from:"岁月小筑",site:"https://img.xjh.me/"}}];return{getImg:function(t){return e["number"==typeof t&&t<e.length?t:parseInt(Math.random()*e.length)]}}}(),i=d.element("div",{class:"bgf"}),o=d.element("div",{class:"bgcover"}),s=d.element("div",{class:"bgi"});d.query(document,"body").appendChild(i),i.appendChild(o),i.appendChild(s);var c=f("background");c.get("bg")||c.set("bg","color-#fff-#333"),c.get("usercolor")||c.set("usercolor","#fff-#333"),c.get("usergjzdy")||c.set("usergjzdy",{light:"",dark:""});var r=[],a=0,l=1,u=2,g=[{tab:"图片/视频",content:{"自定义":[{showtype:a,img:function(){return new Promise(((e,t)=>{$((function(t){t&&e(t)}))}))},out:"userzdyi",select:"user-upload",title:"上传你喜欢的图片或视频作为背景",text:'点击左边图片设置背景，点击<a class="updateImgOrVideo" href="javascript:;">此处</a>上传图片或视频，你可以通过输入图片或视频URL的方式设置，也可以从你的设备本地上传'}],"内置":[{showtype:u,img:"https://image.gumengya.com/thumbnails/06470348c93db185e44f8acd87c5b683.png",select:"img-https://image.gumengya.cn/i/2023/10/13/65294cf55ef7d.png"},{showtype:u,img:"https://image.gumengya.com/thumbnails/5e6200d4552394e722967ef96addd06a.png",select:"img-https://image.gumengya.cn/i/2023/10/13/65294c34841b4.jpg"},{showtype:u,img:"https://image.gumengya.com/thumbnails/7ee6991ee0f43be59c28d183597e0cca.png",select:"img-https://image.gumengya.cn/i/2023/10/13/65294c30563b7.jpg"},{showtype:u,img:"https://image.gumengya.com/thumbnails/ff674343879116e22e3cf713358f2cb5.png",select:"img-https://image.gumengya.com/thumbnails/ff674343879116e22e3cf713358f2cb5.png"},{showtype:u,img:"https://image.gumengya.com/thumbnails/c9c187157ca050044a6589f230e8ddbf.png",select:"img-https://image.gumengya.cn/i/2023/10/13/65294c2d8aae1.png"}],API:[{showtype:l,img:function(){return"https://bing.shangzhenyang.com/api/1080p"},select:"api-bing",title:"必应壁纸",text:"获取必应首页的壁纸作为背景"},{showtype:l,img:function(){return t.getImg(1).url},select:"api-2cy",title:"随机二次元壁纸",text:"获取随机二次元壁纸作为背景，背景提供：loliapi.com"},{showtype:l,img:function(){return n.getImg(1).url},select:"api-fj",title:"随机风景壁纸",text:"获取随机风景壁纸作为背景，背景提供：imgapi.cn"}]}},{tab:"纯色",content:{"自定义":[{showtype:a,color:function(){return new Promise(((e,t)=>{e(c.get("usercolor").split("-"))}))},out:"userzdyc",select:"user-color",title:"将你喜欢的颜色作为背景",text:'点击左边的方块设置背景，点击<a class="updateColor" href="javascript:;">此处</a>编辑颜色'}],"内置":[{showtype:u,color:"#fff-#333",select:"color-#fff-#333"},{showtype:u,color:"#f1f1fe-#3e3e31",select:"color-#f1f1fe-#3e3e31"}],API:[{showtype:l,color:function(){return[h(0),h(1)]},select:"api-time",title:"时间的颜色",text:'获取当前时间的颜色作为背景，详情<a class="timeColorInfo" href="javascript:;">此处</a>'}]}},{tab:"高级自定义",content:'\n    <p>浅色模式：</p><br>\n    <textarea class="gjzdytlight textarea"></textarea>\n    <p>深色模式：</p><br>\n    <textarea class="gjzdytdark textarea"></textarea>\n    <button class="gjzdysetbtn">设置</button>\n    <p class="tip">参见 CSS | background属性</p>\n    '}];function h(e){var t=new Date;return"number"==typeof e?0==e?`rgb(${256-t.getHours()},${256-t.getMinutes()},${256-t.getSeconds()})`:`rgb(${t.getHours()},${t.getMinutes()},${t.getSeconds()})`:document.body.classList.contains("dark")?`rgb(${t.getHours()},${t.getMinutes()},${t.getSeconds()})`:`rgb(${256-t.getHours()},${256-t.getMinutes()},${256-t.getSeconds()})`}var m=d.element("style");function y(e){r.forEach((function(e){clearInterval(e)})),r=[],s.innerHTML="",m.innerHTML="",document.body.classList.remove("t-dark");var i=(e=e.split("-"))[0];e.shift();var o=e.join("-");if("def"!=i)if("img"==i)s.innerHTML=`<img src="${o}"/>`,document.body.classList.add("t-dark");else if("video"==i)s.innerHTML=`<video src="${o}" autoplay loop muted></video>`,document.body.classList.add("t-dark");else if("color"==i)m.innerHTML=`.bgi{background:${o.split("-")[0]};}body.dark .bgi{background:${o.split("-")[1]};}`;else if("api"==i)"2cy"==o?(s.innerHTML=`<img src="${b(t.getImg().url)}"/>`,d.query(s,"img").onerror=function(){this.src=b(t.getImg().url)},document.body.classList.add("t-dark")):"fj"==o?(s.innerHTML=`<img src="${b(n.getImg().url)}"/>`,d.query(s,"img").onerror=function(){this.src=b(n.getImg().url)},document.body.classList.add("t-dark")):"bing"==o?(s.innerHTML=`<img src="${b("https://bing.shangzhenyang.com/api/1080p")}"/>`,d.query(s,"img").onerror=function(){this.src=b("https://bing.shangzhenyang.com/api/1080p")},document.body.classList.add("t-dark")):"time"==o&&r.push(setInterval((function(){s.style.backgroundColor=h()}),1e3));else if("user"==i)if("upload"==e){var a=c.get("userbg");if(!a)return;if(document.body.classList.add("t-dark"),"video"==a.type)a.upasdb?c.get("useruploaderbg",!0,(function(e){s.innerHTML=`<video src="${URL.createObjectURL(e)}" autoplay loop muted></video>`})):s.innerHTML=`<video src="${a.url}" autoplay loop muted></video>`;else if("image"==a.type){a.upasdb?c.get("useruploaderbg",!0,(function(e){s.innerHTML=`<img src="${URL.createObjectURL(e)}"/>`})):s.innerHTML=`<img src="${a.url}"/>`}}else if("color"==e){o=c.get("usercolor");m.innerHTML=`.bgi{background:${o.split("-")[0]};}body.dark .bgi{background:${o.split("-")[1]};}`}else if("gjzdy"==e){o=c.get("usergjzdy");m.innerHTML=`.bgi{background:${o.light};}body.dark .bgi{background:${o.dark};}`}}function b(e){return e+(e.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime()}document.head.append(m);var k=new p({content:`<div class="actionbar">\n    <h1>背景设置</h1><div class="closeBtn">${d.getGoogleIcon("e5cd")}</div>\n  </div>\n  <div class="tab_con"></div>\n  <div class="scroll_con"></div>\n  `,class:"bg_d",mobileShowtype:p.SHOW_TYPE_FULLSCREEN}),L=k.getDialogDom();d.query(L,".closeBtn").onclick=function(){k.close()};var q=d.query(L,"div.tab_con"),w=d.query(L,"div.scroll_con");function T(e,t){var n="";if(e.img)if("string"==typeof e.img)n=`<div class="fk"><img src="${e.img}"></div>`;else{var i=e.img();i instanceof Promise?(n='<div class="fk"></div>',i.then((function(e){d.query(t,".fk").innerHTML=`<img src="${e}"/>`}))):n=`<div class="fk"><img src="${i}"></div>`}else if(e.color){var o;if("string"==typeof e.color)n=x(o=e.color.split("-"));else(o=e.color())instanceof Promise?(n='<div class="fk"></div>',o.then((function(e){d.query(t,".fk").innerHTML=x(e,!0)}))):n=x(o)}return n}function x(e,t){return`${t?"":'<div class="fk">'}\n    <div class="leftcolorbox" style="background:${e[0]}"></div>\n    <div class="rightcolorbox" style="background:${e[1]}"></div>\n    ${t?"":"</div>"}`}function S(e){return`<div class="bg-message">\n      <div class="bg-message-title">${e.title}</div>\n      <div class="bg-message-text">${e.text}</div>\n    </div>`}function H(e){c.set("bg",e),y(e);var t=d.query(w,".bgitem.selected");t&&t.classList.remove("selected");var n=d.query(w,'.bgitem[data-select="'+e+'"');n&&n.classList.add("selected")}function M(e){d.query(L,".tabitem",!0).forEach((function(e){e.classList.remove("active")})),d.query(L,".scrollitem",!0).forEach((function(e){e.style.display=""})),d.query(L,'.tabitem[data-tab="'+e+'"]').classList.add("active"),d.query(L,'.scrollitem[data-tab="'+e+'"]').style.display="block"}g.forEach((function(e,t){var n=e.tab,i=d.element("div",{class:"tabitem","data-tab":t});q.appendChild(i),i.innerHTML=n,i.onclick=function(){M(this.getAttribute("data-tab"))};var o=d.element("div",{class:"scrollitem","data-tab":t});if(w.appendChild(o),"string"!=typeof e.content)for(var s in e.content){var c=d.element("div",{class:"unititem"});c.innerHTML=`<div class="unit-title">${s}</div><div class="unit-content"></div>`,e.content[s].forEach((function(e,t){var n=d.element("div",{class:"bgitem "+["full","half","def"][e.showtype]+" "+e.out??"","data-select":e.select});e.showtype==u?n.innerHTML=T(e,n):e.showtype!=a&&e.showtype!=l||(n.innerHTML=T(e,n)+S(e)),d.query(c,".unit-content").append(n),d.query(n,".fk").onclick=function(){H(this.parentElement.getAttribute("data-select"))}})),o.append(c)}else o.innerHTML=e.content})),d.query(w,".updateImgOrVideo").onclick=function(){E.open()},M("0"),v.registerSetting({title:"设置背景",unit:"背景",message:"",callback:function(){k.open()}});var E=new p({content:'\n    <form>\n      <h1>上传背景</h1>\n      <div class="content">\n        <p>背景类型：<input type="radio" class="uploadi" name="uploadiov" checked/> 图片 \n        <input type="radio" class="uploadv" name="uploadiov"/> 视频 </p>\n        <p>背景URL：<input type="url" placeholder="URL"/></p>\n        <p>从本地选择文件：<input type="file"/></p>\n        <p class="tip">URL和文件只需填写一个即可，优先选择本地文件</p>\n      </div>\n      <div class="footer">\n        <button class="cancel btn">取消</button>\n        <button class="ok btn">确定</button>\n      </div>\n    </form>\n  ',class:"iovuploader"}),I=E.getDialogDom();function $(e){var t=c.get("userbg");if(t){if("video"==t.type)if(t.upasdb)c.get("useruploaderbg",!0,(function(t){j(URL.createObjectURL(t),(function(t){e(t)}))}));else try{j(t.url,(function(t){e(t)}))}catch(t){e(!1)}else if("image"==t.type){t.upasdb?c.get("useruploaderbg",!0,(function(t){e(URL.createObjectURL(t))})):e(t.url)}}else e(!1)}function j(e,t){var n=d.element("video",{src:e,crossOrigin:"anonymous",autoplay:"autoplay"});document.body.append(n),n.oncanplay=function(){var e=document.createElement("canvas");e.width=n.videoWidth,e.height=n.videoHeight,e.getContext("2d").drawImage(n,0,0,n.videoWidth,n.videoHeight);var i=e.toDataURL("image/png");t(i),n.remove()}}d.query(I,".cancel").onclick=function(e){e.preventDefault(),E.close()},d.query(I,"form").onsubmit=function(e){e.preventDefault();var t=d.query(I,".uploadi").checked?"image":"video",n=d.query(I,'input[type="url"]').value,i=d.query(I,'input[type="file"]').files[0];d.query(L,".userzdyi .fk img").src="",i?(c.set("useruploaderbg",i,!0,(function(){E.close(),$((function(e){d.query(L,".userzdyi .fk img").src=e}))})),c.set("userbg",{type:t,upasdb:!0})):(c.set("userbg",{type:t,url:n}),E.close(),$((function(e){d.query(L,".userzdyi .fk img").src=e}))),H("user-upload")};var D=new p({content:'\n    <form>\n      <h1>自定义背景颜色</h1>\n      <div class="content">\n        <p>浅色模式：<input type="color" class="lightbgcolor"/></p>\n        <p>深色模式：<input type="color" class="darkbgcolor"/></p>\n      </div>\n      <div class="footer">\n        <button class="cancel btn">取消</button>\n        <button class="ok btn">确定</button>\n      </div>\n    </form>\n    '}),_=D.getDialogDom();d.query(_,".cancel").onclick=function(e){e.preventDefault(),D.close()},d.query(_,"form").onsubmit=function(e){e.preventDefault();var t=d.query(_,".lightbgcolor").value,n=d.query(_,".darkbgcolor").value;c.set("usercolor",t+"-"+n),d.query(L,".userzdyc .fk").innerHTML=x([t,n],!0),H("user-color"),D.close()},d.query(L,"a.updateColor").onclick=function(){var e=c.get("usercolor"),t=e.split("-")[0],n=e.split("-")[1];d.query(_,".lightbgcolor").value=t,d.query(_,".darkbgcolor").value=n,D.open()},d.query(L,".gjzdysetbtn").onclick=function(){var e=d.query(L,".gjzdytlight").value,t=d.query(L,".gjzdytdark").value;c.set("usergjzdy",{light:e,dark:t}),H("user-gjzdy")};var A=c.get("usergjzdy");d.query(L,".gjzdytlight").value=A.light,d.query(L,".gjzdytdark").value=A.dark,y(c.get("bg"));var U=d.query(w,'.bgitem[data-select="'+c.get("bg")+'"');return U&&U.classList.add("selected"),{changeBg:H}}(),w=(l=new m.icon({class:"main_menu",content:d.getGoogleIcon("e5d2"),offset:"tr"}),u=new h.contextMenu({list:[{icon:d.getGoogleIcon("e88e"),title:"关于QUIK",click:function(){}}],offset:{top:40,right:15}}),l.getIcon().onclick=function(e){e.stopPropagation(),u.show()},{});!function(){var e=new p({content:`<div class="actionbar">\n    <h1>自定义搜索引擎</h1><div class="closeBtn">${d.getGoogleIcon("e5cd")}</div>\n  </div>\n  <div class="searchlist"></div>\n  <div class="footer">\n    <button class="cancel btn">取消</button>\n    <button class="ok btn">确定</button>\n  </div>`,mobileShowtype:p.SHOW_TYPE_FULLSCREEN,class:"search_editor"}),t=e.getDialogDom();d.query(t,".closeBtn").onclick=d.query(t,".cancel.btn").onclick=function(){e.close()},d.query(t,".ok.btn").onclick=d.query(t,".cancel.btn").onclick=function(){var i={};d.query(t,".searchlist .item",!0).forEach((function(e){i[e.dataset.k]=e.querySelector(".url input").value})),(n=i)[y.getSearchTypeIndex()]||y.setSearchType("bing"),y.setSearchList(n),e.close(),g.show("设置成功")};var n=y.getSearchTypeList(),i="";for(var o in n)i+=`<div class="item" data-k="${o}">\n      <div class="icon"><img src="${d.getFavicon(n[o])}" onerror="this.src=quik.util.getFavicon(this.src,true)"/></div>\n      <div class="url"><input value="${n[o]}"/></div>\n      <div class="remove">${d.getGoogleIcon("e5cd")}</div>\n    </div>`;function s(e){d.query(e,".url input").oninput=function(){if("bing"==this.parentElement.parentElement.dataset.k)return this.value=n.bing,void g.show("该项只读");this.parentElement.parentElement.querySelector(".icon img").src=d.getFavicon(this.value)},d.query(e,".remove").onclick=function(){if("bing"==this.parentElement.dataset.k)return this.value=n.bing,void g.show("该项不可删除");this.parentElement.remove()}}i+=`<div class="addnewitem">${d.getGoogleIcon("e145")} 添加新的搜索引擎</div>`,d.query(t,".searchlist").innerHTML=i,d.query(t,".searchlist .item",!0).forEach((function(e){s(e)})),d.query(t,".searchlist .addnewitem").onclick=function(){var e=d.element("div",{class:"item","data-k":"user_"+Date.now().toString().slice(3)});e.innerHTML=`<div class="icon"><img src="https://cn.bing.com/favicon.ico" onerror="this.src=quik.util.getFavicon(this.src,true)"/></div>\n    <div class="url"><input value="https://cn.bing.com/search?q=%keyword%"/></div>\n    <div class="remove">${d.getGoogleIcon("e5cd")}</div>`,d.query(t,".searchlist").insertBefore(e,d.query(t,".searchlist .addnewitem")),s(e)},v.registerSetting({index:2,unit:"搜索框",title:"自定义搜索引擎",message:"",callback:function(){e.open()}})}();window.quik={storage:f,omnibox:y,util:d,link:b,linkUI:k,dialog:p,says:L,menu:h,setting:v,iconc:m,background:q,mainmenu:w},document.querySelector("main").style.display=""}();